var wn=Object.defineProperty;var bn=(t,e,n)=>e in t?wn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var A=(t,e,n)=>(bn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function P(){}function Ln(t,e){for(const n in e)t[n]=e[n];return t}function xe(t){return t()}function Me(){return Object.create(null)}function te(t){t.forEach(xe)}function T(t){return typeof t=="function"}function j(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function kn(t){return Object.keys(t).length===0}function Sn(t,...e){if(t==null){for(const i of e)i(void 0);return P}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ae(t,e,n){t.$$.on_destroy.push(Sn(e,n))}function et(t,e,n,i){if(t){const r=tt(t,e,n,i);return t[0](r)}}function tt(t,e,n,i){return t[1]&&i?Ln(n.ctx.slice(),t[1](i(e))):n.ctx}function nt(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],s=Math.max(e.dirty.length,r.length);for(let u=0;u<s;u+=1)o[u]=e.dirty[u]|r[u];return o}return e.dirty|r}return e.dirty}function it(t,e,n,i,r,o){if(r){const s=tt(e,n,i,o);t.p(s,r)}}function rt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function An(t,e,n){return t.set(n),e}function O(t,e){t.appendChild(e)}function z(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function ee(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function N(t){return document.createElement(t)}function se(t){return document.createTextNode(t)}function G(){return se(" ")}function de(){return se("")}function p(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function ge(t){return function(e){return e.preventDefault(),t.call(this,e)}}function L(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function En(t){return t===""?null:+t}function Rn(t){return Array.from(t.childNodes)}function we(t,e){e=""+e,t.data!==e&&(t.data=e)}function _e(t,e){t.value=e??""}function I(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function Pe(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function In(t){const e=t.querySelector(":checked");return e&&e.__value}let pe;function On(){if(pe===void 0){pe=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{pe=!0}}return pe}function Nn(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=N("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const r=On();let o;return r?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=p(window,"message",s=>{s.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{o=p(i.contentWindow,"resize",e),e()}),O(t,i),()=>{(r||o&&i.contentWindow)&&o(),C(i)}}function Mn(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let ce;function ue(t){ce=t}function he(){if(!ce)throw new Error("Function called outside component initialization");return ce}function ot(t){he().$$.on_mount.push(t)}function st(t){he().$$.on_destroy.push(t)}function Pn(){const t=he();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Mn(e,n,{cancelable:i});return r.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function Cn(t,e){return he().$$.context.set(t,e),e}function Tn(t){return he().$$.context.get(t)}function v(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const re=[],K=[];let oe=[];const Ae=[],zn=Promise.resolve();let Ee=!1;function Dn(){Ee||(Ee=!0,zn.then(lt))}function fe(t){oe.push(t)}function $(t){Ae.push(t)}const Se=new Set;let ne=0;function lt(){if(ne!==0)return;const t=ce;do{try{for(;ne<re.length;){const e=re[ne];ne++,ue(e),qn(e.$$)}}catch(e){throw re.length=0,ne=0,e}for(ue(null),re.length=0,ne=0;K.length;)K.pop()();for(let e=0;e<oe.length;e+=1){const n=oe[e];Se.has(n)||(Se.add(n),n())}oe.length=0}while(re.length);for(;Ae.length;)Ae.pop()();Ee=!1,Se.clear(),ue(t)}function qn(t){if(t.fragment!==null){t.update(),te(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(fe)}}function Bn(t){const e=[],n=[];oe.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),oe=e}const me=new Set;let V;function J(){V={r:0,c:[],p:V}}function Q(){V.r||te(V.c),V=V.p}function w(t,e){t&&t.i&&(me.delete(t),t.i(e))}function k(t,e,n,i){if(t&&t.o){if(me.has(t))return;me.add(t),V.c.push(()=>{me.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function W(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function x(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function B(t){t&&t.c()}function D(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),fe(()=>{const o=t.$$.on_mount.map(xe).filter(T);t.$$.on_destroy?t.$$.on_destroy.push(...o):te(o),t.$$.on_mount=[]}),r.forEach(fe)}function q(t,e){const n=t.$$;n.fragment!==null&&(Bn(n.after_update),te(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Un(t,e){t.$$.dirty[0]===-1&&(re.push(t),Dn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(t,e,n,i,r,o,s,u=[-1]){const l=ce;ue(t);const c=t.$$={fragment:null,ctx:[],props:o,update:P,not_equal:r,bound:Me(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Me(),dirty:u,skip_bound:!1,root:e.target||l.$$.root};s&&s(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(m,g,...d)=>{const _=d.length?d[0]:g;return c.ctx&&r(c.ctx[m],c.ctx[m]=_)&&(!c.skip_bound&&c.bound[m]&&c.bound[m](_),f&&Un(t,m)),g}):[],c.update(),f=!0,te(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const m=Rn(e.target);c.fragment&&c.fragment.l(m),m.forEach(C)}else c.fragment&&c.fragment.c();e.intro&&w(t.$$.fragment),D(t,e.target,e.anchor),lt()}ue(l)}class Y{constructor(){A(this,"$$");A(this,"$$set")}$destroy(){q(this,1),this.$destroy=P}$on(e,n){if(!T(n))return P;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!kn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const jn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(jn);class U{constructor(e){A(this,"value");this.value=e}add(e){return e instanceof U?new U(this.value+e.value):new U(this.value+e)}subtract(e){return e instanceof U?new U(this.value-e.value):new U(this.value-e)}multiply(e){return e instanceof U?new U(this.value*e.value):new U(this.value*e)}divide(e){return e instanceof U?new U(this.value/e.value):new U(this.value/e)}px(){return`${this.value}px`}percent(){return`${this.value}%`}rem(){return`${this.value}rem`}val(){return this.value}}getComputedStyle(document.body).getPropertyValue("background-color");let ut=t=>`rgba(220, 220, 220, ${t})`,Re=ut(1),at=1;const Fn=5,Wn=2,Xn=50,Yn=new U(245),Hn=4,Ie="#353535",ct=new U(20),Oe=new U(2),Kn="#00df16",Gn=Ie,Ce=5,Jn=.05;function Qn(t){let e,n,i,r,o=(typeof t[4]=="string"?`${t[4]}: ${t[0]}`:t[4](t[0]))+"",s,u,l;return{c(){e=N("div"),n=N("input"),i=G(),r=N("span"),s=se(o),L(n,"type","range"),L(n,"min",t[1]),L(n,"max",t[2]),L(n,"step",t[3]),L(n,"class","svelte-zgqnk3"),I(r,"--color",t[5]),L(r,"class","svelte-zgqnk3"),L(e,"class","slidercontainer svelte-zgqnk3")},m(c,f){z(c,e,f),O(e,n),_e(n,t[0]),O(e,i),O(e,r),O(r,s),u||(l=[p(n,"change",t[7]),p(n,"input",t[7])],u=!0)},p(c,[f]){f&2&&L(n,"min",c[1]),f&4&&L(n,"max",c[2]),f&8&&L(n,"step",c[3]),f&1&&_e(n,c[0]),f&17&&o!==(o=(typeof c[4]=="string"?`${c[4]}: ${c[0]}`:c[4](c[0]))+"")&&we(s,o)},i:P,o:P,d(c){c&&C(e),u=!1,te(l)}}}function Zn(t,e,n){let{min:i=0}=e,{max:r=100}=e,{step:o=1}=e,{initialValue:s=1/0}=e,{value:u}=e;s!=1/0&&(u=s);let l=Re,{text:c=m=>`${m}`}=e;function f(){u=En(this.value),n(0,u)}return t.$$set=m=>{"min"in m&&n(1,i=m.min),"max"in m&&n(2,r=m.max),"step"in m&&n(3,o=m.step),"initialValue"in m&&n(6,s=m.initialValue),"value"in m&&n(0,u=m.value),"text"in m&&n(4,c=m.text)},[u,i,r,o,c,l,s,f]}class Vn extends Y{constructor(e){super(),X(this,e,Zn,Qn,j,{min:1,max:2,step:3,initialValue:6,value:0,text:4})}}const ie=[];function $n(t,e){return{subscribe:Ne(t,e).subscribe}}function Ne(t,e=P){let n;const i=new Set;function r(u){if(j(t,u)&&(t=u,n)){const l=!ie.length;for(const c of i)c[1](),ie.push(c,t);if(l){for(let c=0;c<ie.length;c+=2)ie[c][0](ie[c+1]);ie.length=0}}}function o(u){r(u(t))}function s(u,l=P){const c=[u,l];return i.add(c),i.size===1&&(n=e(r,o)||P),u(t),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:s}}function Te(t){return t*2654435761%2**32}function*xn(t){let e=[...t.nodes.all()].sort((n,i)=>Te(n)-Te(i));t.edges.clear();for(let n=0;n<e.length;n++)t.edges.add([e[n],e[(n+1)%e.length]]),yield}let ft=class{constructor(){A(this,"nextIdx",0);A(this,"nodes",new Map)}add(e,n){this.nodes.set(this.nextIdx,[e,n]),this.nextIdx++}setCoords(e,n){if(!this.nodes.has(e))throw new Error(`node ${e} not found`);this.nodes.set(e,n)}get(e){let n=this.nodes.get(e);if(n===void 0)throw new Error(`node ${e} not found`);return n}delete(e){this.nodes.delete(e)}count(){return this.nodes.size}all(){return this.nodes.keys()}},dt=class{constructor(e){A(this,"edges",new Set);e!=null&&(this.edges=structuredClone(e.edges))}associateNumber(e){let n=[...e].sort((i,r)=>i-r).reverse();return n[0]*(n[0]+1)/2+n[1]}disassociateNumber(e){let n=Math.floor((Math.sqrt(8*e+1)-1)/2),i=e-n*(n+1)/2;return[n,i]}add(e){if(e[0]===e[1])throw new Error("self loop not allowed");this.edges.add(this.associateNumber(e))}delete(e){return this.edges.delete(this.associateNumber(e))}has(e){return this.edges.has(this.associateNumber(e))}count(){return this.edges.size}*all(){for(let e of this.edges)yield this.disassociateNumber(e)}clear(){this.edges.clear()}};class ht{constructor(e=new ft,n=new dt){this.nodes=e,this.edges=n}edgeLength(e){const[n,i]=this.nodes.get(e[0]),[r,o]=this.nodes.get(e[1]);return Math.sqrt((n-r)**2+(i-o)**2)}totalLength(){let e=0;for(let n of this.edges.all())e+=this.edgeLength(n);return e}neighborMap(){var n,i;let e=new Map;for(let[r,o]of this.edges.all())e.has(r)||e.set(r,new Set),e.has(o)||e.set(o,new Set),(n=e.get(r))==null||n.add(o),(i=e.get(o))==null||i.add(r);return e}neighbors(e){let n=new Set;for(let[i,r]of this.edges.all())i===e&&n.add(r),r===e&&n.add(i);return n}isClosedLoop(){if(this.edges.count()<3)return!1;let e=this.neighborMap(),n=e.keys().next().value,i=-1,r=n,o=0;do{let s=[...e.get(r).values()];if(s.length!==2)return!1;s=s.filter(u=>u!==i),i=r,r=s[0],o++}while(r!==n&&o<=this.edges.count()+1);return o===this.edges.count()}}function*ei(t){for(;ti(t);)yield}function ti(t){let e=[...t.edges.all()];for(;e.length>=2;){let n=e.pop();for(let i of e){let[r,o,s]=ni(n,i,t);if(r)return t.edges.delete(n),t.edges.delete(i),t.edges.add(o),t.edges.add(s),!0}}return!1}function ni(t,e,n){function i(c,f){if(n.edgeLength(c)+n.edgeLength(f)>=r)return!1;let m=new ht;for(let g of n.edges.all())m.edges.add(g);return m.edges.delete(t),m.edges.delete(e),m.edges.add(c),m.edges.add(f),m.isClosedLoop()}const r=n.edgeLength(t)+n.edgeLength(e),[o,s]=t,[u,l]=e;return o==u||o==l||s==u||s==l?[!1,t,e]:i([o,u],[s,l])?[!0,[o,u],[s,l]]:i([o,l],[s,u])?[!0,[o,l],[s,u]]:[!1,t,e]}function ii(t,e){const{bestEdgeToInsert:n}=gt(t,e);e.edges.delete(n),e.edges.add([t,n[0]]),e.edges.add([t,n[1]])}function gt(t,e){let n=1/0,i;for(let r of e.edges.all()){const o=e.edgeLength([t,r[0]])+e.edgeLength([t,r[1]])-e.edgeLength(r);o<n&&(n=o,i=r)}return i=i,{bestEdgeToInsert:i,minLeng:n}}function*ri(t){const e=[...t.nodes.all()];for(let n=0;n<e.length;n++){const i=e[n];oi(i,t)&&(n=-1,yield)}}function oi(t,e){const n=[...e.neighbors(t)];e.edges.delete([t,n[0]]),e.edges.delete([t,n[1]]);const i=[n[0],n[1]];return e.edges.add(i),ii(t,e),e.edges.has(i)}function*si(t){t.edges.clear();let e=[...t.nodes.all()],[n,i,r]=e.splice(0,3);for(t.edges.add([n,i]),t.edges.add([i,r]),t.edges.add([n,r]),yield;e.length>0;){let o,s,u=1/0;for(let l of e){let{bestEdgeToInsert:c,minLeng:f}=gt(l,t);f<u&&(u=f,o=l,s=c)}s=s,o=o,e.splice(e.indexOf(o),1),t.edges.delete(s),t.edges.add([o,s[0]]),t.edges.add([o,s[1]]),yield}}class li{constructor(e){A(this,"timesUsed",0);this.partition=e}getPartition(){switch(typeof this.partition){case"number":return this.partition;case"object":return this.partition.getPartition()}}setPartition(e){typeof this.partition=="object"&&this.partition.setPartition(e),this.partition=e}incrementTimesUsed(){this.timesUsed++}isUsedUp(){return this.timesUsed>=2}}function*ui(t){t.edges.clear();let e=[],n=[...t.nodes.all()];for(let o=0;o<n.length-1;o++)for(let s=o+1;s<n.length;s++){let u=[n[o],n[s]];e.push([u,t.edgeLength(u)])}e.sort((o,s)=>o[1]-s[1]);let i=new Map(n.map((o,s)=>[o,new li(s)]));for(let[o,s]of e){if(t.edges.count()==t.nodes.count()-1)break;let u=i.get(o[0]),l=i.get(o[1]);u.isUsedUp()||l.isUsedUp()||u.getPartition()==l.getPartition()||(t.edges.add(o),u.incrementTimesUsed(),l.incrementTimesUsed(),u.setPartition(l),yield)}let r=n.filter(o=>!i.get(o).isUsedUp());t.edges.add(r),yield}const pt=["Random","Shortest edge","Cheapest insertion"],ye=["Next neighbor","2-Opt"];function mt(t){switch(t){case"Random":return"Randomly chosen edges, which form a cycle";case"2-Opt":return"Select two edges and swap them if it improves the total distance (this removes a crossing)";case"Next neighbor":return"Select the closest neighbor to the current node";case"Cheapest insertion":return"Insert the closest node to the current cycle";case"Shortest edge":return"Select the shortest edge"}}function ai(t){switch(t){case"Random":return xn;case"2-Opt":return ei;case"Next neighbor":return ri;case"Cheapest insertion":return si;case"Shortest edge":return ui}}function*ci(t,e){yield*ai(e)(t)}const le=Ne({nPoints:40,initAlgo:pt[0],optimAlgoStack:[ye[0],ye[1]]}),ve=Ne({renderedStep:15});function fi(t){let e,n,i,r;return{c(){e=N("button"),n=se(t[0]),L(e,"class","svelte-utlsjp"),I(e,"background-color",Ie),I(e,"margin",Oe.px()),I(e,"height",ct.px()),I(e,"color",Re)},m(o,s){z(o,e,s),O(e,n),i||(r=p(e,"click",t[1]),i=!0)},p(o,[s]){s&1&&we(n,o[0])},i:P,o:P,d(o){o&&C(e),i=!1,r()}}}function di(t,e,n){let{text:i=""}=e;function r(o){v.call(this,t,o)}return t.$$set=o=>{"text"in o&&n(0,i=o.text)},[i,r]}class _t extends Y{constructor(e){super(),X(this,e,di,fi,j,{text:0})}}function ze(t,e,n){const i=t.slice();return i[4]=e[n],i}function De(t){let e,n=t[4]+"",i,r,o;return{c(){e=N("option"),i=se(n),e.__value=r=t[4],_e(e,e.__value),L(e,"title",o=t[2](t[4]))},m(s,u){z(s,e,u),O(e,i)},p(s,u){u&2&&n!==(n=s[4]+"")&&we(i,n),u&2&&r!==(r=s[4])&&(e.__value=r,_e(e,e.__value)),u&6&&o!==(o=s[2](s[4]))&&L(e,"title",o)},d(s){s&&C(e)}}}function hi(t){let e,n,i,r=W(t[1]),o=[];for(let s=0;s<r.length;s+=1)o[s]=De(ze(t,r,s));return{c(){e=N("select");for(let s=0;s<o.length;s+=1)o[s].c();L(e,"id","options"),L(e,"class","svelte-oxggog"),t[0]===void 0&&fe(()=>t[3].call(e)),I(e,"background-color",Ie),I(e,"margin",Oe.px()),I(e,"height",ct.px()),I(e,"color",Re)},m(s,u){z(s,e,u);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(e,null);Pe(e,t[0],!0),n||(i=p(e,"change",t[3]),n=!0)},p(s,[u]){if(u&6){r=W(s[1]);let l;for(l=0;l<r.length;l+=1){const c=ze(s,r,l);o[l]?o[l].p(c,u):(o[l]=De(c),o[l].c(),o[l].m(e,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=r.length}u&3&&Pe(e,s[0])},i:P,o:P,d(s){s&&C(e),ee(o,s),n=!1,i()}}}function gi(t,e,n){let{selectedOption:i}=e,{algoOptions:r}=e,{algoDescription:o}=e;function s(){i=In(this),n(0,i),n(1,r)}return t.$$set=u=>{"selectedOption"in u&&n(0,i=u.selectedOption),"algoOptions"in u&&n(1,r=u.algoOptions),"algoDescription"in u&&n(2,o=u.algoDescription)},[i,r,o,s]}class yt extends Y{constructor(e){super(),X(this,e,gi,hi,j,{selectedOption:0,algoOptions:1,algoDescription:2})}}function pi(t){let e,n,i,r,o=(t[0].len+1e-4).toString().slice(0,4)+"",s,u,l;return{c(){e=N("div"),n=N("div"),i=G(),r=N("sub"),s=se(o),u=G(),l=N("button"),L(n,"id","placehodler"),L(n,"class","svelte-771zgf"),L(r,"class","svelte-771zgf"),I(r,"color",t[3]),L(l,"class","svelte-771zgf"),I(l,"background-color",t[3]),I(l,"width",t[2]),L(e,"id","container"),L(e,"title","length at this step"),L(e,"class","svelte-771zgf"),I(e,"margin",Oe.px())},m(c,f){z(c,e,f),O(e,n),O(e,i),O(e,r),O(r,s),O(e,u),O(e,l),t[6](l)},p(c,[f]){f&1&&o!==(o=(c[0].len+1e-4).toString().slice(0,4)+"")&&we(s,o),f&8&&I(r,"color",c[3]),f&8&&I(l,"background-color",c[3]),f&4&&I(l,"width",c[2])},i:P,o:P,d(c){c&&C(e),t[6](null)}}}function mi(t,e,n){let i,r,o;ae(t,ve,f=>n(5,o=f));let{step:s}=e,{maxLeng:u}=e,l;function c(f){K[f?"unshift":"push"](()=>{l=f,n(1,l)})}return t.$$set=f=>{"step"in f&&n(0,s=f.step),"maxLeng"in f&&n(4,u=f.maxLeng)},t.$$.update=()=>{t.$$.dirty&33&&n(3,i=s.index==o.renderedStep?Kn:Gn),t.$$.dirty&17&&n(2,r=`${s.len/u*100}%`),t.$$.dirty&35&&s.index==o.renderedStep&&(l==null||l.scrollIntoView({behavior:"instant",block:"center"}))},[s,l,r,i,u,o,c]}class vt extends Y{constructor(e){super(),X(this,e,mi,pi,j,{step:0,maxLeng:4})}}function qe(t,e,n){const i=t.slice();return i[7]=e[n],i[8]=e,i[9]=n,i}function Be(t,e,n){const i=t.slice();return i[10]=e[n],i}function Ue(t,e,n){const i=t.slice();return i[10]=e[n],i}function je(t){let e,n;return e=new vt({props:{step:t[10],maxLeng:t[2].maxLeng}}),{c(){B(e.$$.fragment)},m(i,r){D(e,i,r),n=!0},p(i,r){const o={};r&4&&(o.step=i[10]),r&4&&(o.maxLeng=i[2].maxLeng),e.$set(o)},i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){q(e,i)}}}function Fe(t){let e,n;return e=new vt({props:{step:t[10],maxLeng:t[2].maxLeng}}),{c(){B(e.$$.fragment)},m(i,r){D(e,i,r),n=!0},p(i,r){const o={};r&4&&(o.step=i[10]),r&4&&(o.maxLeng=i[2].maxLeng),e.$set(o)},i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){q(e,i)}}}function We(t){let e,n,i,r,o,s;function u(g){t[6](g,t[7],t[8],t[9])}let l={algoOptions:[...ye.values()],algoDescription:mt};t[7]!==void 0&&(l.selectedOption=t[7]),n=new yt({props:l}),K.push(()=>x(n,"selectedOption",u));let c=W(t[2].steps[t[9]+1]),f=[];for(let g=0;g<c.length;g+=1)f[g]=Fe(Be(t,c,g));const m=g=>k(f[g],1,1,()=>{f[g]=null});return{c(){e=N("div"),B(n.$$.fragment),r=G();for(let g=0;g<f.length;g+=1)f[g].c();o=de(),L(e,"title","optimization Algorithm")},m(g,d){z(g,e,d),D(n,e,null),z(g,r,d);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(g,d);z(g,o,d),s=!0},p(g,d){t=g;const _={};if(!i&&d&2&&(i=!0,_.selectedOption=t[7],$(()=>i=!1)),n.$set(_),d&4){c=W(t[2].steps[t[9]+1]);let b;for(b=0;b<c.length;b+=1){const h=Be(t,c,b);f[b]?(f[b].p(h,d),w(f[b],1)):(f[b]=Fe(h),f[b].c(),w(f[b],1),f[b].m(o.parentNode,o))}for(J(),b=c.length;b<f.length;b+=1)m(b);Q()}},i(g){if(!s){w(n.$$.fragment,g);for(let d=0;d<c.length;d+=1)w(f[d]);s=!0}},o(g){k(n.$$.fragment,g),f=f.filter(Boolean);for(let d=0;d<f.length;d+=1)k(f[d]);s=!1},d(g){g&&(C(e),C(r),C(o)),q(n),ee(f,g)}}}function Xe(t){let e,n;return e=new _t({props:{text:"add algorithm"}}),e.$on("click",t[3]),{c(){B(e.$$.fragment)},m(i,r){D(e,i,r),n=!0},p:P,i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){q(e,i)}}}function Ye(t){let e,n;return e=new _t({props:{text:"remove algorithm"}}),e.$on("click",t[4]),{c(){B(e.$$.fragment)},m(i,r){D(e,i,r),n=!0},p:P,i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){q(e,i)}}}function _i(t){let e,n,i,r,o,s,u,l,c;function f(y){t[5](y)}let m={algoOptions:[...pt.values()],algoDescription:mt};t[0]!==void 0&&(m.selectedOption=t[0]),i=new yt({props:m}),K.push(()=>x(i,"selectedOption",f));let g=W(t[2].steps[0]),d=[];for(let y=0;y<g.length;y+=1)d[y]=je(Ue(t,g,y));const _=y=>k(d[y],1,1,()=>{d[y]=null});let b=W(t[1]),h=[];for(let y=0;y<b.length;y+=1)h[y]=We(qe(t,b,y));const H=y=>k(h[y],1,1,()=>{h[y]=null});let R=t[1].length+1<=Ce&&Xe(t),M=t[1].length>0&&Ye(t);return{c(){e=N("div"),n=N("div"),B(i.$$.fragment),o=G();for(let y=0;y<d.length;y+=1)d[y].c();s=G();for(let y=0;y<h.length;y+=1)h[y].c();u=G(),R&&R.c(),l=G(),M&&M.c(),L(n,"title","initialization Algorithm"),L(e,"class","container svelte-risjyu")},m(y,E){z(y,e,E),O(e,n),D(i,n,null),O(e,o);for(let F=0;F<d.length;F+=1)d[F]&&d[F].m(e,null);O(e,s);for(let F=0;F<h.length;F+=1)h[F]&&h[F].m(e,null);O(e,u),R&&R.m(e,null),O(e,l),M&&M.m(e,null),c=!0},p(y,[E]){const F={};if(!r&&E&1&&(r=!0,F.selectedOption=y[0],$(()=>r=!1)),i.$set(F),E&4){g=W(y[2].steps[0]);let S;for(S=0;S<g.length;S+=1){const Z=Ue(y,g,S);d[S]?(d[S].p(Z,E),w(d[S],1)):(d[S]=je(Z),d[S].c(),w(d[S],1),d[S].m(e,s))}for(J(),S=g.length;S<d.length;S+=1)_(S);Q()}if(E&6){b=W(y[1]);let S;for(S=0;S<b.length;S+=1){const Z=qe(y,b,S);h[S]?(h[S].p(Z,E),w(h[S],1)):(h[S]=We(Z),h[S].c(),w(h[S],1),h[S].m(e,u))}for(J(),S=b.length;S<h.length;S+=1)H(S);Q()}y[1].length+1<=Ce?R?(R.p(y,E),E&2&&w(R,1)):(R=Xe(y),R.c(),w(R,1),R.m(e,l)):R&&(J(),k(R,1,1,()=>{R=null}),Q()),y[1].length>0?M?(M.p(y,E),E&2&&w(M,1)):(M=Ye(y),M.c(),w(M,1),M.m(e,null)):M&&(J(),k(M,1,1,()=>{M=null}),Q())},i(y){if(!c){w(i.$$.fragment,y);for(let E=0;E<g.length;E+=1)w(d[E]);for(let E=0;E<b.length;E+=1)w(h[E]);w(R),w(M),c=!0}},o(y){k(i.$$.fragment,y),d=d.filter(Boolean);for(let E=0;E<d.length;E+=1)k(d[E]);h=h.filter(Boolean);for(let E=0;E<h.length;E+=1)k(h[E]);k(R),k(M),c=!1},d(y){y&&C(e),q(i),ee(d,y),ee(h,y),R&&R.d(),M&&M.d()}}}function yi(t,e,n){let{initAlgo:i}=e,{optimAlgoStack:r}=e,{memory:o}=e;function s(){r.push(ye[0]),n(1,r)}function u(){r.pop(),n(1,r)}function l(f){i=f,n(0,i)}function c(f,m,g,d){g[d]=f,n(1,r)}return t.$$set=f=>{"initAlgo"in f&&n(0,i=f.initAlgo),"optimAlgoStack"in f&&n(1,r=f.optimAlgoStack),"memory"in f&&n(2,o=f.memory)},[i,r,o,s,u,l,c]}class vi extends Y{constructor(e){super(),X(this,e,yi,_i,j,{initAlgo:0,optimAlgoStack:1,memory:2})}}function wi(t){let e,n,i,r,o,s,u,l,c,f;function m(h){t[4](h)}function g(h){t[5](h)}let d={memory:t[0]};t[2].initAlgo!==void 0&&(d.initAlgo=t[2].initAlgo),t[2].optimAlgoStack!==void 0&&(d.optimAlgoStack=t[2].optimAlgoStack),i=new vi({props:d}),K.push(()=>x(i,"initAlgo",m)),K.push(()=>x(i,"optimAlgoStack",g));function _(h){t[6](h)}let b={text:"Number of Points",min:Hn,max:Xn};return t[2].nPoints!==void 0&&(b.value=t[2].nPoints),l=new Vn({props:b}),K.push(()=>x(l,"value",_)),{c(){e=N("div"),n=N("div"),B(i.$$.fragment),s=G(),u=N("div"),B(l.$$.fragment),L(n,"class","stack svelte-1ggf4bk"),L(u,"class","slider svelte-1ggf4bk"),L(e,"class","container svelte-1ggf4bk"),I(e,"width",Yn.px())},m(h,H){z(h,e,H),O(e,n),D(i,n,null),O(e,s),O(e,u),D(l,u,null),t[7](e),f=!0},p(h,[H]){const R={};H&1&&(R.memory=h[0]),!r&&H&4&&(r=!0,R.initAlgo=h[2].initAlgo,$(()=>r=!1)),!o&&H&4&&(o=!0,R.optimAlgoStack=h[2].optimAlgoStack,$(()=>o=!1)),i.$set(R);const M={};!c&&H&4&&(c=!0,M.value=h[2].nPoints,$(()=>c=!1)),l.$set(M)},i(h){f||(w(i.$$.fragment,h),w(l.$$.fragment,h),f=!0)},o(h){k(i.$$.fragment,h),k(l.$$.fragment,h),f=!1},d(h){h&&C(e),q(i),q(l),t[7](null)}}}function bi(t,e,n){let i,r;ae(t,ve,d=>n(8,i=d)),ae(t,le,d=>n(2,r=d));let{memory:o}=e,s=0,u;function l(d){n(3,s+=d.deltaY/o.nSteps*Jn),n(3,s=Math.max(s,0)),n(3,s=Math.min(s,.9999))}ot(()=>{u.addEventListener("wheel",l)});function c(d){t.$$.not_equal(r.initAlgo,d)&&(r.initAlgo=d,le.set(r))}function f(d){t.$$.not_equal(r.optimAlgoStack,d)&&(r.optimAlgoStack=d,le.set(r))}function m(d){t.$$.not_equal(r.nPoints,d)&&(r.nPoints=d,le.set(r))}function g(d){K[d?"unshift":"push"](()=>{u=d,n(1,u)})}return t.$$set=d=>{"memory"in d&&n(0,o=d.memory)},t.$$.update=()=>{t.$$.dirty&9&&An(ve,i.renderedStep=Math.floor(o.nSteps*s),i)},[o,u,r,s,c,f,m,g]}class Li extends Y{constructor(e){super(),X(this,e,bi,wi,j,{memory:0})}}class ki{constructor(){A(this,"currentLayerId");A(this,"setups");A(this,"renderers");A(this,"dispatchers");A(this,"needsSetup");A(this,"needsRedraw");A(this,"context");A(this,"width");A(this,"height");A(this,"autoclear");A(this,"pixelRatio");A(this,"renderLoop");A(this,"layerObserver");A(this,"layerRef");A(this,"layerSequence");A(this,"renderingLayerId");A(this,"activeLayerId");A(this,"activeLayerDispatcher");this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.getRenderingLayerId=this.getRenderingLayerId.bind(this),this.currentLayerId=1,this.setups=new Map,this.renderers=new Map,this.dispatchers=new Map,this.needsSetup=!1,this.needsRedraw=!0,this.renderingLayerId=0,this.activeLayerId=0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}register({setup:e,render:n,dispatcher:i}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,n),this.dispatchers.set(this.currentLayerId,i),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.dispatchers.delete(e),this.needsRedraw=!0}setup(e,n){this.context=e,this.layerRef=n,this.observeLayerSequence(),this.startRenderLoop()}observeLayerSequence(){this.layerObserver=new MutationObserver(this.getLayerSequence.bind(this)),this.layerObserver.observe(this.layerRef,{childList:!0}),this.getLayerSequence()}getLayerSequence(){const e=[...this.layerRef.children];this.layerSequence=e.map(n=>+(n.dataset.layerId??-1)),this.redraw()}startRenderLoop(){this.render(),this.renderLoop=requestAnimationFrame(()=>this.startRenderLoop())}render(){var o;const e=this.context,n=this.width,i=this.height,r=this.pixelRatio;if(this.needsSetup){for(const[s,u]of this.setups)u({context:e,width:n,height:i}),this.setups.delete(s);this.needsSetup=!1}if(this.needsRedraw){e.setTransform(r,0,0,r,0,0),this.autoclear&&e.clearRect(0,0,n,i);for(const s of this.layerSequence)this.renderingLayerId=s,(o=this.renderers.get(s))==null||o({context:e,width:n,height:i});this.needsRedraw=!1}}setActiveLayer(e,n){this.activeLayerId!==e&&(n instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerleave",n)),this.dispatchLayerEvent(new MouseEvent("mouseleave",n))),this.activeLayerId=e,this.activeLayerDispatcher=this.dispatchers.get(e),n instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerenter",n)),this.dispatchLayerEvent(new MouseEvent("mouseenter",n))))}dispatchLayerEvent(e){if(this.activeLayerDispatcher){if(window.TouchEvent&&e instanceof TouchEvent){const{left:n,top:i}=e.target.getBoundingClientRect(),{clientX:r,clientY:o}=e.changedTouches[0],s={x:r-n,y:o-i,originalEvent:e};this.activeLayerDispatcher(e.type,s)}else if(e instanceof MouseEvent){const n={x:e.offsetX,y:e.offsetY,originalEvent:e};this.activeLayerDispatcher(e.type,n)}}}getRenderingLayerId(){return this.renderingLayerId}destroy(){typeof window>"u"||(this.layerObserver.disconnect(),cancelAnimationFrame(this.renderLoop))}}const Si=t=>{const e=t*2,n=e>>16&255,i=e>>8&255,r=e&255;return`rgb(${n}, ${i}, ${r})`},Ai=(t,e,n)=>{const i=(t<<16|e<<8|n)/2;return i%1?0:i},Ei=["drawImage"],Ri=["filter","shadowBlur","globalCompositeOperation","globalAlpha"],Ii=["drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],Oi=t=>{let e;const n=document.createElement("canvas"),i=n.getContext("2d",{willReadFrequently:!0}),r=()=>{n.width=t.canvas.width,n.height=t.canvas.height};return new MutationObserver(r).observe(t.canvas,{attributeFilter:["width","height"]}),r(),new Proxy(t,{get(s,u){if(u==="_getLayerIdAtPixel")return(c,f)=>{const[m,g,d]=i.getImageData(c,f,1,1).data;return Ai(m,g,d)};const l=s[u];return typeof l!="function"?l:function(...c){if(Ii.includes(u)){const f=Si(e());i.fillStyle=f,i.strokeStyle=f}if(u==="drawImage"){const f=c.slice(1);i.fillRect(...f)}return Ei.includes(u)||Reflect.apply(l,i,c),Reflect.apply(l,s,c)}},set(s,u,l){return u==="_renderingLayerId"?(e=l,!0):(s[u]=l,Ri.includes(u)||(i[u]=l),!0)}})};function Ni(t){let e,n,i,r=`${t[0]}px`,o=`${t[1]}px`,s,u,l,c,f;const m=t[18].default,g=et(m,t,t[17],null);return{c(){e=N("canvas"),s=G(),u=N("div"),g&&g.c(),L(e,"width",n=t[0]*t[5]),L(e,"height",i=t[1]*t[5]),L(e,"class",t[4]),L(e,"style",t[2]),I(e,"display","block"),I(e,"width",r),I(e,"height",o),I(u,"display","none")},m(d,_){z(d,e,_),t[64](e),z(d,s,_),z(d,u,_),g&&g.m(u,null),t[65](u),l=!0,c||(f=[p(e,"touchstart",ge(function(){T(t[3]?t[9]:null)&&(t[3]?t[9]:null).apply(this,arguments)})),p(e,"mousemove",function(){T(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),p(e,"pointermove",function(){T(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),p(e,"click",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"contextmenu",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"dblclick",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"mousedown",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"mouseenter",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"mouseleave",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"mouseup",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"wheel",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"touchcancel",ge(function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),p(e,"touchend",ge(function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),p(e,"touchmove",ge(function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),p(e,"pointerenter",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"pointerleave",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"pointerdown",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"pointerup",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"pointercancel",function(){T(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),p(e,"focus",t[19]),p(e,"blur",t[20]),p(e,"fullscreenchange",t[21]),p(e,"fullscreenerror",t[22]),p(e,"scroll",t[23]),p(e,"cut",t[24]),p(e,"copy",t[25]),p(e,"paste",t[26]),p(e,"keydown",t[27]),p(e,"keypress",t[28]),p(e,"keyup",t[29]),p(e,"auxclick",t[30]),p(e,"click",t[31]),p(e,"contextmenu",t[32]),p(e,"dblclick",t[33]),p(e,"mousedown",t[34]),p(e,"mouseenter",t[35]),p(e,"mouseleave",t[36]),p(e,"mousemove",t[37]),p(e,"mouseover",t[38]),p(e,"mouseout",t[39]),p(e,"mouseup",t[40]),p(e,"select",t[41]),p(e,"wheel",t[42]),p(e,"drag",t[43]),p(e,"dragend",t[44]),p(e,"dragenter",t[45]),p(e,"dragstart",t[46]),p(e,"dragleave",t[47]),p(e,"dragover",t[48]),p(e,"drop",t[49]),p(e,"touchcancel",t[50]),p(e,"touchend",t[51]),p(e,"touchmove",t[52]),p(e,"touchstart",t[53]),p(e,"pointerover",t[54]),p(e,"pointerenter",t[55]),p(e,"pointerdown",t[56]),p(e,"pointermove",t[57]),p(e,"pointerup",t[58]),p(e,"pointercancel",t[59]),p(e,"pointerout",t[60]),p(e,"pointerleave",t[61]),p(e,"gotpointercapture",t[62]),p(e,"lostpointercapture",t[63])],c=!0)},p(d,_){t=d,(!l||_[0]&33&&n!==(n=t[0]*t[5]))&&L(e,"width",n),(!l||_[0]&34&&i!==(i=t[1]*t[5]))&&L(e,"height",i),(!l||_[0]&16)&&L(e,"class",t[4]),(!l||_[0]&4)&&L(e,"style",t[2]);const b=_[0]&4;b&&I(e,"display","block"),(b||_[0]&5&&r!==(r=`${t[0]}px`))&&I(e,"width",r),(b||_[0]&6&&o!==(o=`${t[1]}px`))&&I(e,"height",o),g&&g.p&&(!l||_[0]&131072)&&it(g,m,t,t[17],l?nt(m,t[17],_,null):rt(t[17]),null)},i(d){l||(w(g,d),l=!0)},o(d){k(g,d),l=!1},d(d){d&&(C(e),C(s),C(u)),t[64](null),g&&g.d(d),t[65](null),c=!1,te(f)}}}const wt=Symbol(),Mi=()=>Tn(wt);function Pi(t,e,n){let i,{$$slots:r={},$$scope:o}=e,{width:s=640,height:u=640,pixelRatio:l=null,style:c="",autoclear:f=!0,layerEvents:m=!1}=e,{class:g=""}=e,d,_=null,b;const h=new ki;function H(){h.redraw()}function R(){return d}function M(){return _}l==null&&(typeof window<"u"?l=window.devicePixelRatio:l=2),Cn(wt,{register:h.register,unregister:h.unregister,redraw:h.redraw}),ot(()=>{const a=d.getContext("2d");m?(_=Oi(a),_._renderingLayerId=h.getRenderingLayerId):_=a,h.setup(_,b)}),st(()=>h.destroy());const y=a=>{const be=a.offsetX*i,Le=a.offsetY*i,ke=_._getLayerIdAtPixel(be,Le);h.setActiveLayer(ke,a),h.dispatchLayerEvent(a)},E=a=>{const{clientX:be,clientY:Le}=a.changedTouches[0],{left:ke,top:mn}=d.getBoundingClientRect(),_n=(be-ke)*i,yn=(Le-mn)*i,vn=_._getLayerIdAtPixel(_n,yn);h.setActiveLayer(vn,a),h.dispatchLayerEvent(a)},F=a=>{window.TouchEvent&&a instanceof TouchEvent&&a.preventDefault(),h.dispatchLayerEvent(a)};function S(a){v.call(this,t,a)}function Z(a){v.call(this,t,a)}function St(a){v.call(this,t,a)}function At(a){v.call(this,t,a)}function Et(a){v.call(this,t,a)}function Rt(a){v.call(this,t,a)}function It(a){v.call(this,t,a)}function Ot(a){v.call(this,t,a)}function Nt(a){v.call(this,t,a)}function Mt(a){v.call(this,t,a)}function Pt(a){v.call(this,t,a)}function Ct(a){v.call(this,t,a)}function Tt(a){v.call(this,t,a)}function zt(a){v.call(this,t,a)}function Dt(a){v.call(this,t,a)}function qt(a){v.call(this,t,a)}function Bt(a){v.call(this,t,a)}function Ut(a){v.call(this,t,a)}function jt(a){v.call(this,t,a)}function Ft(a){v.call(this,t,a)}function Wt(a){v.call(this,t,a)}function Xt(a){v.call(this,t,a)}function Yt(a){v.call(this,t,a)}function Ht(a){v.call(this,t,a)}function Kt(a){v.call(this,t,a)}function Gt(a){v.call(this,t,a)}function Jt(a){v.call(this,t,a)}function Qt(a){v.call(this,t,a)}function Zt(a){v.call(this,t,a)}function Vt(a){v.call(this,t,a)}function $t(a){v.call(this,t,a)}function xt(a){v.call(this,t,a)}function en(a){v.call(this,t,a)}function tn(a){v.call(this,t,a)}function nn(a){v.call(this,t,a)}function rn(a){v.call(this,t,a)}function on(a){v.call(this,t,a)}function sn(a){v.call(this,t,a)}function ln(a){v.call(this,t,a)}function un(a){v.call(this,t,a)}function an(a){v.call(this,t,a)}function cn(a){v.call(this,t,a)}function fn(a){v.call(this,t,a)}function dn(a){v.call(this,t,a)}function hn(a){v.call(this,t,a)}function gn(a){K[a?"unshift":"push"](()=>{d=a,n(6,d)})}function pn(a){K[a?"unshift":"push"](()=>{b=a,n(7,b)})}return t.$$set=a=>{"width"in a&&n(0,s=a.width),"height"in a&&n(1,u=a.height),"pixelRatio"in a&&n(11,l=a.pixelRatio),"style"in a&&n(2,c=a.style),"autoclear"in a&&n(12,f=a.autoclear),"layerEvents"in a&&n(3,m=a.layerEvents),"class"in a&&n(4,g=a.class),"$$scope"in a&&n(17,o=a.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2048&&n(5,i=l??1),t.$$.dirty[0]&1&&n(16,h.width=s,h),t.$$.dirty[0]&2&&n(16,h.height=u,h),t.$$.dirty[0]&32&&n(16,h.pixelRatio=i,h),t.$$.dirty[0]&4096&&n(16,h.autoclear=f,h),t.$$.dirty[0]&71683&&h.redraw()},[s,u,c,m,g,i,d,b,y,E,F,l,f,H,R,M,h,o,r,S,Z,St,At,Et,Rt,It,Ot,Nt,Mt,Pt,Ct,Tt,zt,Dt,qt,Bt,Ut,jt,Ft,Wt,Xt,Yt,Ht,Kt,Gt,Jt,Qt,Zt,Vt,$t,xt,en,tn,nn,rn,on,sn,ln,un,an,cn,fn,dn,hn,gn,pn]}class Ci extends Y{constructor(e){super(),X(this,e,Pi,Ni,j,{width:0,height:1,pixelRatio:11,style:2,autoclear:12,layerEvents:3,class:4,redraw:13,getCanvas:14,getContext:15},null,[-1,-1,-1])}get redraw(){return this.$$.ctx[13]}get getCanvas(){return this.$$.ctx[14]}get getContext(){return this.$$.ctx[15]}}function Ti(t){let e;return{c(){e=N("div"),L(e,"data-layer-id",t[0])},m(n,i){z(n,e,i)},p:P,i:P,o:P,d(n){n&&C(e)}}}function zi(t,e,n){const{register:i,unregister:r,redraw:o}=Mi(),s=Pn();let{setup:u=void 0}=e,{render:l=()=>{}}=e;const c=i({setup:u,render:l,dispatcher:s});return st(()=>r(c)),t.$$set=f=>{"setup"in f&&n(1,u=f.setup),"render"in f&&n(2,l=f.render)},t.$$.update=()=>{t.$$.dirty&4&&o()},[c,u,l]}class bt extends Y{constructor(e){super(),X(this,e,zi,Ti,j,{setup:1,render:2})}}let He;const Lt=Date.now(),kt=t=>(t(Date.now()-Lt),He=window.requestAnimationFrame(()=>kt(t)),()=>window.cancelAnimationFrame(He));function Di(){}$n(Date.now()-Lt,typeof window>"u"?Di:kt);function qi(t){let e;const n=t[2].default,i=et(n,t,t[3],null);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o&8)&&it(i,n,r,r[3],e?nt(n,r[3],o,null):rt(r[3]),null)},i(r){e||(w(i,r),e=!0)},o(r){k(i,r),e=!1},d(r){i&&i.d(r)}}}function Bi(t){let e,n,i;return n=new Ci({props:{width:t[0],height:t[1],$$slots:{default:[qi]},$$scope:{ctx:t}}}),{c(){e=N("div"),B(n.$$.fragment),L(e,"class","svelte-1katzbq")},m(r,o){z(r,e,o),D(n,e,null),i=!0},p(r,[o]){const s={};o&1&&(s.width=r[0]),o&2&&(s.height=r[1]),o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){i||(w(n.$$.fragment,r),i=!0)},o(r){k(n.$$.fragment,r),i=!1},d(r){r&&C(e),q(n)}}}function Ui(t,e,n){let{$$slots:i={},$$scope:r}=e,{width:o=0}=e,{height:s=0}=e;return t.$$set=u=>{"width"in u&&n(0,o=u.width),"height"in u&&n(1,s=u.height),"$$scope"in u&&n(3,r=u.$$scope)},[o,s,i,r]}class ji extends Y{constructor(e){super(),X(this,e,Ui,Bi,j,{width:0,height:1})}}function Fi(t){let e,n;return e=new bt({props:{render:t[0]}}),{c(){B(e.$$.fragment)},m(i,r){D(e,i,r),n=!0},p:P,i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){q(e,i)}}}function Wi(t,e,n){let i,r,{coords:o}=e;const s=({context:u,width:l,height:c})=>{u.fillStyle="white",u.beginPath(),u.arc(i*l,r*c,Fn,0,2*Math.PI),u.fill()};return t.$$set=u=>{"coords"in u&&n(1,o=u.coords)},t.$$.update=()=>{t.$$.dirty&2&&([i,r]=o)},[s,o]}class Xi extends Y{constructor(e){super(),X(this,e,Wi,Fi,j,{coords:1})}}function Ke(t,e,n){const i=t.slice();return i[1]=e[n],i}function Ge(t){let e,n;return e=new Xi({props:{coords:t[0].nodes.get(t[1])}}),{c(){B(e.$$.fragment)},m(i,r){D(e,i,r),n=!0},p(i,r){const o={};r&1&&(o.coords=i[0].nodes.get(i[1])),e.$set(o)},i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){q(e,i)}}}function Yi(t){let e,n,i=W(t[0].nodes.all()),r=[];for(let s=0;s<i.length;s+=1)r[s]=Ge(Ke(t,i,s));const o=s=>k(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=de()},m(s,u){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,u);z(s,e,u),n=!0},p(s,[u]){if(u&1){i=W(s[0].nodes.all());let l;for(l=0;l<i.length;l+=1){const c=Ke(s,i,l);r[l]?(r[l].p(c,u),w(r[l],1)):(r[l]=Ge(c),r[l].c(),w(r[l],1),r[l].m(e.parentNode,e))}for(J(),l=i.length;l<r.length;l+=1)o(l);Q()}},i(s){if(!n){for(let u=0;u<i.length;u+=1)w(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)k(r[u]);n=!1},d(s){s&&C(e),ee(r,s)}}}function Hi(t,e,n){let{memory:i}=e;return t.$$set=r=>{"memory"in r&&n(0,i=r.memory)},[i]}class Ki extends Y{constructor(e){super(),X(this,e,Hi,Yi,j,{memory:0})}}function Gi(t){let e,n;return e=new bt({props:{render:t[0]}}),{c(){B(e.$$.fragment)},m(i,r){D(e,i,r),n=!0},p:P,i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){q(e,i)}}}function Ji(t,e,n){let i,r,o,s,{coords:u}=e,{opacity:l=1}=e;const c=({context:f,width:m,height:g})=>{f.beginPath(),f.moveTo(i*m,r*g),f.lineTo(o*m,s*g),f.strokeStyle=ut(l),f.lineWidth=Wn,f.stroke()};return t.$$set=f=>{"coords"in f&&n(1,u=f.coords),"opacity"in f&&n(2,l=f.opacity)},t.$$.update=()=>{t.$$.dirty&2&&([[i,r],[o,s]]=u)},[c,u,l]}class Qi extends Y{constructor(e){super(),X(this,e,Ji,Gi,j,{coords:1,opacity:2})}}function Je(t,e,n){const i=t.slice();return i[2]=e[n],i[4]=n,i}function Qe(t,e,n){const i=t.slice();return i[5]=e[n],i}function Ze(t){let e,n;return e=new Qi({props:{coords:[t[1].nodes.get(t[5][0]),t[1].nodes.get(t[5][1])],opacity:Math.pow(4,-t[4])}}),{c(){B(e.$$.fragment)},m(i,r){D(e,i,r),n=!0},p(i,r){const o={};r&3&&(o.coords=[i[1].nodes.get(i[5][0]),i[1].nodes.get(i[5][1])]),e.$set(o)},i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){q(e,i)}}}function Ve(t){let e,n,i=W(t[2]),r=[];for(let s=0;s<i.length;s+=1)r[s]=Ze(Qe(t,i,s));const o=s=>k(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=de()},m(s,u){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,u);z(s,e,u),n=!0},p(s,u){if(u&3){i=W(s[2]);let l;for(l=0;l<i.length;l+=1){const c=Qe(s,i,l);r[l]?(r[l].p(c,u),w(r[l],1)):(r[l]=Ze(c),r[l].c(),w(r[l],1),r[l].m(e.parentNode,e))}for(J(),l=i.length;l<r.length;l+=1)o(l);Q()}},i(s){if(!n){for(let u=0;u<i.length;u+=1)w(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)k(r[u]);n=!1},d(s){s&&C(e),ee(r,s)}}}function Zi(t){let e,n,i=W(t[0]),r=[];for(let s=0;s<i.length;s+=1)r[s]=Ve(Je(t,i,s));const o=s=>k(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=de()},m(s,u){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,u);z(s,e,u),n=!0},p(s,[u]){if(u&3){i=W(s[0]);let l;for(l=0;l<i.length;l+=1){const c=Je(s,i,l);r[l]?(r[l].p(c,u),w(r[l],1)):(r[l]=Ve(c),r[l].c(),w(r[l],1),r[l].m(e.parentNode,e))}for(J(),l=i.length;l<r.length;l+=1)o(l);Q()}},i(s){if(!n){for(let u=0;u<i.length;u+=1)w(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)k(r[u]);n=!1},d(s){s&&C(e),ee(r,s)}}}function Vi(t,e,n){let{stepsToRender:i}=e,{memory:r}=e;return t.$$set=o=>{"stepsToRender"in o&&n(0,i=o.stepsToRender),"memory"in o&&n(1,r=o.memory)},[i,r]}class $i extends Y{constructor(e){super(),X(this,e,Vi,Zi,j,{stepsToRender:0,memory:1})}}class xi{constructor(){A(this,"steps",[]);A(this,"nSteps",0);A(this,"nodes",new ft);A(this,"maxLeng",0)}addRandomNodes(e=1){for(let n=0;n<e;n++)this.nodes.add(Math.random(),Math.random())}adjustNumberOfNodes(e){if(this.nodes.count()<e)this.addRandomNodes(e-this.nodes.count());else if(this.nodes.count()>e){let n=[...this.nodes.all()].slice(e);for(let i of n)this.nodes.delete(i)}}runAlgos(e){this.steps=[],this.maxLeng=0;let n=0,i=new ht(this.nodes);for(let r of e){let o=[];const s=()=>{let u=i.totalLength();this.maxLeng=Math.max(u,this.maxLeng);let l=new dt(i.edges);o.push({edges:l,len:u,index:n}),n++,this.nSteps=n};r==e[0]&&s();for(let u of ci(i,r))s();if(r==e[e.length-1])for(let u=0;u<at;u++)s();this.steps.push(o)}}}function $e(t){let e,n,i,r;return e=new Ki({props:{memory:t[0]}}),i=new $i({props:{memory:t[0],stepsToRender:t[4]}}),{c(){B(e.$$.fragment),n=G(),B(i.$$.fragment)},m(o,s){D(e,o,s),z(o,n,s),D(i,o,s),r=!0},p(o,s){const u={};s&1&&(u.memory=o[0]),e.$set(u);const l={};s&1&&(l.memory=o[0]),s&16&&(l.stepsToRender=o[4]),i.$set(l)},i(o){r||(w(e.$$.fragment,o),w(i.$$.fragment,o),r=!0)},o(o){k(e.$$.fragment,o),k(i.$$.fragment,o),r=!1},d(o){o&&C(n),q(e,o),q(i,o)}}}function er(t){let e=t[3],n,i,r=$e(t);return{c(){r.c(),n=de()},m(o,s){r.m(o,s),z(o,n,s),i=!0},p(o,s){s&8&&j(e,e=o[3])?(J(),k(r,1,1,P),Q(),r=$e(o),r.c(),w(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){i||(w(r),i=!0)},o(o){k(r),i=!1},d(o){o&&C(n),r.d(o)}}}function tr(t){let e,n,i,r,o,s,u,l,c,f;function m(_){t[7](_)}function g(_){t[8](_)}let d={$$slots:{default:[er]},$$scope:{ctx:t}};return t[1]!==void 0&&(d.width=t[1]),t[2]!==void 0&&(d.height=t[2]),i=new ji({props:d}),K.push(()=>x(i,"width",m)),K.push(()=>x(i,"height",g)),c=new Li({props:{memory:t[0]}}),{c(){e=N("div"),n=N("div"),B(i.$$.fragment),u=G(),l=N("div"),B(c.$$.fragment),L(n,"id","canvas"),L(n,"class","svelte-r17pga"),fe(()=>t[9].call(n)),L(l,"id","input"),L(e,"id","app"),L(e,"class","svelte-r17pga")},m(_,b){z(_,e,b),O(e,n),D(i,n,null),s=Nn(n,t[9].bind(n)),O(e,u),O(e,l),D(c,l,null),f=!0},p(_,[b]){const h={};b&1049&&(h.$$scope={dirty:b,ctx:_}),!r&&b&2&&(r=!0,h.width=_[1],$(()=>r=!1)),!o&&b&4&&(o=!0,h.height=_[2],$(()=>o=!1)),i.$set(h);const H={};b&1&&(H.memory=_[0]),c.$set(H)},i(_){f||(w(i.$$.fragment,_),w(c.$$.fragment,_),f=!0)},o(_){k(i.$$.fragment,_),k(c.$$.fragment,_),f=!1},d(_){_&&C(e),q(i),s(),q(c)}}}function nr(t,e,n){let i,r,o;ae(t,le,d=>n(5,r=d)),ae(t,ve,d=>n(6,o=d));let s,u,l=new xi,c=0;function f(d){s=d,n(1,s)}function m(d){u=d,n(2,u)}function g(){u=this.clientHeight,s=this.clientWidth,n(2,u),n(1,s)}return t.$$.update=()=>{if(t.$$.dirty&33){l.adjustNumberOfNodes(r.nPoints);let d=[r.initAlgo,...r.optimAlgoStack];l.runAlgos(d),n(0,l),n(5,r)}t.$$.dirty&65&&n(4,i=l.steps.flat().slice(Math.max(o.renderedStep-at,0),o.renderedStep+1).reverse().map(d=>[...d.edges.all()])),t.$$.dirty&104&&n(3,c+=1)},[l,s,u,c,i,r,o,f,m,g]}class ir extends Y{constructor(e){super(),X(this,e,nr,tr,j,{})}}new ir({target:document.body});
