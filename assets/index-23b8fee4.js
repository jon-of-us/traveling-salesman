var pn=Object.defineProperty;var _n=(t,e,n)=>e in t?pn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var S=(t,e,n)=>(_n(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function M(){}function vn(t,e){for(const n in e)t[n]=e[n];return t}function Ge(t){return t()}function we(){return Object.create(null)}function J(t){t.forEach(Ge)}function D(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function yn(t){return Object.keys(t).length===0}function Je(t,e,n,i){if(t){const s=Qe(t,e,n,i);return t[0](s)}}function Qe(t,e,n,i){return t[1]&&i?vn(n.ctx.slice(),t[1](i(e))):n.ctx}function Ve(t,e,n,i){if(t[2]&&i){const s=t[2](i(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],r=Math.max(e.dirty.length,s.length);for(let a=0;a<r;a+=1)o[a]=e.dirty[a]|s[a];return o}return e.dirty|s}return e.dirty}function Ze(t,e,n,i,s,o){if(s){const r=Qe(e,n,i,o);t.p(r,s)}}function $e(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function R(t,e){t.appendChild(e)}function T(t,e,n){t.insertBefore(e,n||null)}function O(t){t.parentNode&&t.parentNode.removeChild(t)}function V(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function ee(t){return document.createTextNode(t)}function j(){return ee(" ")}function ie(){return ee("")}function f(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function re(t){return function(e){return e.preventDefault(),t.call(this,e)}}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function wn(t){return Array.from(t.childNodes)}function de(t,e){e=""+e,t.data!==e&&(t.data=e)}function be(t,e){t.value=e??""}function E(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function Le(t,e,n){for(let i=0;i<t.options.length;i+=1){const s=t.options[i];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}let le;function bn(){if(le===void 0){le=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{le=!0}}return le}function Ln(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=C("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=bn();let o;return s?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=f(window,"message",r=>{r.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{o=f(i.contentWindow,"resize",e),e()}),R(t,i),()=>{(s||o&&i.contentWindow)&&o(),O(i)}}function Sn(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let ne;function te(t){ne=t}function se(){if(!ne)throw new Error("Function called outside component initialization");return ne}function xe(t){se().$$.on_mount.push(t)}function et(t){se().$$.on_destroy.push(t)}function kn(){const t=se();return(e,n,{cancelable:i=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=Sn(e,n,{cancelable:i});return s.slice().forEach(r=>{r.call(t,o)}),!o.defaultPrevented}return!0}}function An(t,e){return se().$$.context.set(t,e),e}function In(t){return se().$$.context.get(t)}function y(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const $=[],G=[];let x=[];const _e=[],Nn=Promise.resolve();let ve=!1;function Rn(){ve||(ve=!0,Nn.then(tt))}function ue(t){x.push(t)}function Se(t){_e.push(t)}const pe=new Set;let Z=0;function tt(){if(Z!==0)return;const t=ne;do{try{for(;Z<$.length;){const e=$[Z];Z++,te(e),Cn(e.$$)}}catch(e){throw $.length=0,Z=0,e}for(te(null),$.length=0,Z=0;G.length;)G.pop()();for(let e=0;e<x.length;e+=1){const n=x[e];pe.has(n)||(pe.add(n),n())}x.length=0}while($.length);for(;_e.length;)_e.pop()();ve=!1,pe.clear(),te(t)}function Cn(t){if(t.fragment!==null){t.update(),J(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ue)}}function En(t){const e=[],n=[];x.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),x=e}const ae=new Set;let Q;function H(){Q={r:0,c:[],p:Q}}function K(){Q.r||J(Q.c),Q=Q.p}function v(t,e){t&&t.i&&(ae.delete(t),t.i(e))}function k(t,e,n,i){if(t&&t.o){if(ae.has(t))return;ae.add(t),Q.c.push(()=>{ae.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function W(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ke(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function P(t){t&&t.c()}function q(t,e,n){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,n),ue(()=>{const o=t.$$.on_mount.map(Ge).filter(D);t.$$.on_destroy?t.$$.on_destroy.push(...o):J(o),t.$$.on_mount=[]}),s.forEach(ue)}function F(t,e){const n=t.$$;n.fragment!==null&&(En(n.after_update),J(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function On(t,e){t.$$.dirty[0]===-1&&($.push(t),Rn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(t,e,n,i,s,o,r,a=[-1]){const l=ne;te(t);const d=t.$$={fragment:null,ctx:[],props:o,update:M,not_equal:s,bound:we(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:we(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};r&&r(d.root);let u=!1;if(d.ctx=n?n(t,e.props||{},(g,m,...h)=>{const N=h.length?h[0]:m;return d.ctx&&s(d.ctx[g],d.ctx[g]=N)&&(!d.skip_bound&&d.bound[g]&&d.bound[g](N),u&&On(t,g)),m}):[],d.update(),u=!0,J(d.before_update),d.fragment=i?i(d.ctx):!1,e.target){if(e.hydrate){const g=wn(e.target);d.fragment&&d.fragment.l(g),g.forEach(O)}else d.fragment&&d.fragment.c();e.intro&&v(t.$$.fragment),q(t,e.target,e.anchor),tt()}te(l)}class Y{constructor(){S(this,"$$");S(this,"$$set")}$destroy(){F(this,1),this.$destroy=M}$on(e,n){if(!D(n))return M;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!yn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Mn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Mn);class B{constructor(e){S(this,"value");this.value=e}add(e){return e instanceof B?new B(this.value+e.value):new B(this.value+e)}subtract(e){return e instanceof B?new B(this.value-e.value):new B(this.value-e)}multiply(e){return e instanceof B?new B(this.value*e.value):new B(this.value*e)}divide(e){return e instanceof B?new B(this.value/e.value):new B(this.value/e)}px(){return`${this.value}px`}percent(){return`${this.value}%`}rem(){return`${this.value}rem`}val(){return this.value}}getComputedStyle(document.body).getPropertyValue("background-color");let nt=t=>`rgba(220, 220, 220, ${t})`,oe=nt(1);const it=1,Tn=3.5,Dn=5,qn=2,st=60,Fn=new B(245),Pn=4,Ae=15,fe="#353535",ot=new B(20),ye=new B(2),zn="#00df16",Bn=fe,Ie=5,jn=.05;function Un(t){let e,n,i,s,o=(typeof t[4]=="string"?`${t[4]}: ${t[0]}`:t[4](t[0]))+"",r,a,l;return{c(){e=C("div"),n=C("input"),i=j(),s=C("span"),r=ee(o),_(n,"type","range"),_(n,"min",t[1]),_(n,"max",t[2]),_(n,"step",t[3]),n.value=t[0],_(n,"class","svelte-zgqnk3"),E(s,"--color",t[5]),_(s,"class","svelte-zgqnk3"),_(e,"class","slidercontainer svelte-zgqnk3")},m(d,u){T(d,e,u),R(e,n),R(e,i),R(e,s),R(s,r),a||(l=f(n,"input",t[6]),a=!0)},p(d,[u]){u&2&&_(n,"min",d[1]),u&4&&_(n,"max",d[2]),u&8&&_(n,"step",d[3]),u&1&&(n.value=d[0]),u&17&&o!==(o=(typeof d[4]=="string"?`${d[4]}: ${d[0]}`:d[4](d[0]))+"")&&de(r,o)},i:M,o:M,d(d){d&&O(e),a=!1,l()}}}function Yn(t,e,n){let{min:i=0}=e,{max:s=100}=e,{step:o=1}=e,{initialValue:r=1/0}=e,{value:a}=e,{onInput:l=()=>{}}=e;r!=1/0&&(a=r);let d=oe,{text:u=m=>`${m}`}=e;function g(m){const h=m.target;n(0,a=parseFloat(h.value)),l(a)}return t.$$set=m=>{"min"in m&&n(1,i=m.min),"max"in m&&n(2,s=m.max),"step"in m&&n(3,o=m.step),"initialValue"in m&&n(7,r=m.initialValue),"value"in m&&n(0,a=m.value),"onInput"in m&&n(8,l=m.onInput),"text"in m&&n(4,u=m.text)},[a,i,s,o,u,d,g,r,l]}class Wn extends Y{constructor(e){super(),U(this,e,Yn,Un,z,{min:1,max:2,step:3,initialValue:7,value:0,onInput:8,text:4})}}function Xn(t){let e,n,i,s;return{c(){e=C("button"),n=ee(t[0]),_(e,"class","svelte-utlsjp"),E(e,"background-color",fe),E(e,"margin",ye.px()),E(e,"height",ot.px()),E(e,"color",oe)},m(o,r){T(o,e,r),R(e,n),i||(s=f(e,"click",t[1]),i=!0)},p(o,[r]){r&1&&de(n,o[0])},i:M,o:M,d(o){o&&O(e),i=!1,s()}}}function Hn(t,e,n){let{text:i=""}=e;function s(o){y.call(this,t,o)}return t.$$set=o=>{"text"in o&&n(0,i=o.text)},[i,s]}class rt extends Y{constructor(e){super(),U(this,e,Hn,Xn,z,{text:0})}}function Ne(t,e,n){const i=t.slice();return i[5]=e[n],i}function Re(t){let e,n=t[5]+"",i,s,o;return{c(){e=C("option"),i=ee(n),e.__value=s=t[5],be(e,e.__value),_(e,"title",o=t[2](t[5]))},m(r,a){T(r,e,a),R(e,i)},p(r,a){a&1&&n!==(n=r[5]+"")&&de(i,n),a&1&&s!==(s=r[5])&&(e.__value=s,be(e,e.__value)),a&5&&o!==(o=r[2](r[5]))&&_(e,"title",o)},d(r){r&&O(e)}}}function Kn(t){let e,n,i,s=W(t[0]),o=[];for(let r=0;r<s.length;r+=1)o[r]=Re(Ne(t,s,r));return{c(){e=C("select");for(let r=0;r<o.length;r+=1)o[r].c();_(e,"id","options"),_(e,"class","svelte-oxggog"),E(e,"background-color",fe),E(e,"margin",ye.px()),E(e,"height",ot.px()),E(e,"color",oe)},m(r,a){T(r,e,a);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(e,null);Le(e,t[1]),n||(i=f(e,"change",t[3]),n=!0)},p(r,[a]){if(a&5){s=W(r[0]);let l;for(l=0;l<s.length;l+=1){const d=Ne(r,s,l);o[l]?o[l].p(d,a):(o[l]=Re(d),o[l].c(),o[l].m(e,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}a&3&&Le(e,r[1])},i:M,o:M,d(r){r&&O(e),V(o,r),n=!1,i()}}}function Gn(t,e,n){let{algoOptions:i}=e,{selectedOption:s}=e,{algoDescription:o}=e,{onChange:r}=e;function a(l){const d=l.target;r(d.value)}return t.$$set=l=>{"algoOptions"in l&&n(0,i=l.algoOptions),"selectedOption"in l&&n(1,s=l.selectedOption),"algoDescription"in l&&n(2,o=l.algoDescription),"onChange"in l&&n(4,r=l.onChange)},[i,s,o,a,r]}class lt extends Y{constructor(e){super(),U(this,e,Gn,Kn,z,{algoOptions:0,selectedOption:1,algoDescription:2,onChange:4})}}function Ce(t){return t*2654435761%2**32}function*Jn(t){let e=[...t.nodes.all()].sort((n,i)=>Ce(n)-Ce(i));t.edges.clear();for(let n=0;n<e.length;n++)t.edges.add([e[n],e[(n+1)%e.length]]),yield}let at=class{constructor(){S(this,"nextIdx",0);S(this,"nodes",new Map)}add(e,n){if([e,n].some(i=>i<0||i>1))throw new Error("x and y should be between 0 and 1");this.nodes.set(this.nextIdx,[e,n]),this.nextIdx++}setCoords(e,n){if(!this.nodes.has(e))throw new Error(`node ${e} not found`);this.nodes.set(e,n)}getCoords(e){let n=this.nodes.get(e);if(n===void 0)throw new Error(`node ${e} not found`);return n}findNearNode(e,n){for(let[i,s]of this.nodes)if((s[0]-e[0])**2+(s[1]-e[1])**2<n**2)return i}delete(e){this.nodes.delete(e)}count(){return this.nodes.size}all(){return this.nodes.keys()}},ut=class{constructor(e){S(this,"edges",new Set);e!=null&&(this.edges=structuredClone(e.edges))}associateNumber(e){let n=[...e].sort((i,s)=>i-s).reverse();return n[0]*(n[0]+1)/2+n[1]}disassociateNumber(e){let n=Math.floor((Math.sqrt(8*e+1)-1)/2),i=e-n*(n+1)/2;return[n,i]}add(e){if(e[0]===e[1])throw new Error("self loop not allowed");this.edges.add(this.associateNumber(e))}delete(e){return this.edges.delete(this.associateNumber(e))}has(e){return this.edges.has(this.associateNumber(e))}count(){return this.edges.size}*all(){for(let e of this.edges)yield this.disassociateNumber(e)}clear(){this.edges.clear()}};class ct{constructor(e=new at,n=new ut){this.nodes=e,this.edges=n}edgeLength(e){const[n,i]=this.nodes.getCoords(e[0]),[s,o]=this.nodes.getCoords(e[1]);return Math.sqrt((n-s)**2+(i-o)**2)}totalLength(){let e=0;for(let n of this.edges.all())e+=this.edgeLength(n);return e}neighborMap(){var n,i;let e=new Map;for(let[s,o]of this.edges.all())e.has(s)||e.set(s,new Set),e.has(o)||e.set(o,new Set),(n=e.get(s))==null||n.add(o),(i=e.get(o))==null||i.add(s);return e}neighbors(e){let n=new Set;for(let[i,s]of this.edges.all())i===e&&n.add(s),s===e&&n.add(i);return n}isClosedLoop(){if(this.edges.count()<3)return!1;let e=this.neighborMap(),n=e.keys().next().value,i=-1,s=n,o=0;do{let r=[...e.get(s).values()];if(r.length!==2)return!1;r=r.filter(a=>a!==i),i=s,s=r[0],o++}while(s!==n&&o<=this.edges.count()+1);return o===this.edges.count()}}function*Qn(t){for(;Vn(t);)yield}function Vn(t){let e=[...t.edges.all()];for(;e.length>=2;){let n=e.pop();for(let i of e){let[s,o,r]=Zn(n,i,t);if(s)return t.edges.delete(n),t.edges.delete(i),t.edges.add(o),t.edges.add(r),!0}}return!1}function Zn(t,e,n){function i(d,u){if(n.edgeLength(d)+n.edgeLength(u)>=s)return!1;let g=new ct;for(let m of n.edges.all())g.edges.add(m);return g.edges.delete(t),g.edges.delete(e),g.edges.add(d),g.edges.add(u),g.isClosedLoop()}const s=n.edgeLength(t)+n.edgeLength(e),[o,r]=t,[a,l]=e;return o==a||o==l||r==a||r==l?[!1,t,e]:i([o,a],[r,l])?[!0,[o,a],[r,l]]:i([o,l],[r,a])?[!0,[o,l],[r,a]]:[!1,t,e]}function $n(t,e){const{bestEdgeToInsert:n}=dt(t,e);e.edges.delete(n),e.edges.add([t,n[0]]),e.edges.add([t,n[1]])}function dt(t,e){let n=1/0,i;for(let s of e.edges.all()){const o=e.edgeLength([t,s[0]])+e.edgeLength([t,s[1]])-e.edgeLength(s);o<n&&(n=o,i=s)}return i=i,{bestEdgeToInsert:i,minLeng:n}}function*xn(t){const e=[...t.nodes.all()];for(let n=0;n<e.length;n++){const i=e[n];ei(i,t)&&(n=-1,yield)}}function ei(t,e){const n=e.totalLength(),i=[...e.neighbors(t)];e.edges.delete([t,i[0]]),e.edges.delete([t,i[1]]);const s=[i[0],i[1]];return e.edges.add(s),$n(t,e),n-e.totalLength()>1e-4}function*ti(t){t.edges.clear();let e=[...t.nodes.all()],[n,i,s]=e.splice(0,3);for(t.edges.add([n,i]),t.edges.add([i,s]),t.edges.add([n,s]),yield;e.length>0;){let o,r,a=1/0;for(let l of e){let{bestEdgeToInsert:d,minLeng:u}=dt(l,t);u<a&&(a=u,o=l,r=d)}r=r,o=o,e.splice(e.indexOf(o),1),t.edges.delete(r),t.edges.add([o,r[0]]),t.edges.add([o,r[1]]),yield}}class ni{constructor(e){S(this,"timesUsed",0);this.partition=e}getPartition(){switch(typeof this.partition){case"number":return this.partition;case"object":return this.partition.getPartition()}}setPartition(e){typeof this.partition=="object"&&this.partition.setPartition(e),this.partition=e}incrementTimesUsed(){this.timesUsed++}isUsedUp(){return this.timesUsed>=2}}function*ii(t){t.edges.clear();let e=[],n=[...t.nodes.all()];for(let o=0;o<n.length-1;o++)for(let r=o+1;r<n.length;r++){let a=[n[o],n[r]];e.push([a,t.edgeLength(a)])}e.sort((o,r)=>o[1]-r[1]);let i=new Map(n.map((o,r)=>[o,new ni(r)]));for(let[o,r]of e){if(t.edges.count()==t.nodes.count()-1)break;let a=i.get(o[0]),l=i.get(o[1]);a.isUsedUp()||l.isUsedUp()||a.getPartition()==l.getPartition()||(t.edges.add(o),a.incrementTimesUsed(),l.incrementTimesUsed(),a.setPartition(l),yield)}let s=n.filter(o=>!i.get(o).isUsedUp());t.edges.add(s),yield}const ft=["Random","Shortest edge","Cheapest insertion"],ce=["Next neighbor","2-Opt"];function ht(t){switch(t){case"Random":return"Randomly chosen edges, which form a cycle";case"2-Opt":return"Select two edges and swap them if it improves the total distance (often this removes a crossing)";case"Next neighbor":return"Select the closest neighbor to the current node";case"Cheapest insertion":return"Start with a random Triangle. Insert the closest node to the current cycle";case"Shortest edge":return"Start without any edges. Select the shortest edge and add it to the graph, if it is still possible to form a cycle after that. Repeat until all nodes are connected"}}function si(t){switch(t){case"Random":return Jn;case"2-Opt":return Qn;case"Next neighbor":return xn;case"Cheapest insertion":return ti;case"Shortest edge":return ii}}function*oi(t,e){yield*si(e)(t)}function ri(t){let e,n,i,s,o=(t[0].len+1e-4).toString().slice(0,4)+"",r,a,l;return{c(){e=C("div"),n=C("div"),i=j(),s=C("sub"),r=ee(o),a=j(),l=C("button"),_(n,"id","placeholder"),_(n,"class","svelte-1e3tgy7"),_(s,"class","svelte-1e3tgy7"),E(s,"color",t[3]),_(l,"class","svelte-1e3tgy7"),E(l,"background-color",t[3]),E(l,"width",t[2]),_(e,"id","container"),_(e,"title","length at this step"),_(e,"class","svelte-1e3tgy7"),E(e,"margin",ye.px())},m(d,u){T(d,e,u),R(e,n),R(e,i),R(e,s),R(s,r),R(e,a),R(e,l),t[6](l)},p(d,[u]){u&1&&o!==(o=(d[0].len+1e-4).toString().slice(0,4)+"")&&de(r,o),u&8&&E(s,"color",d[3]),u&8&&E(l,"background-color",d[3]),u&4&&E(l,"width",d[2])},i:M,o:M,d(d){d&&O(e),t[6](null)}}}function li(t,e,n){let i,s,{step:o}=e,{maxLeng:r}=e,{main:a}=e,l;function d(u){G[u?"unshift":"push"](()=>{l=u,n(1,l)})}return t.$$set=u=>{"step"in u&&n(0,o=u.step),"maxLeng"in u&&n(4,r=u.maxLeng),"main"in u&&n(5,a=u.main)},t.$$.update=()=>{t.$$.dirty&33&&n(3,i=o.index==a.renderedStep?zn:Bn),t.$$.dirty&17&&n(2,s=`${o.len/r*100}%`),t.$$.dirty&35&&o.index==a.renderedStep&&(l==null||l.scrollIntoView({behavior:"instant",block:"center"}))},[o,l,s,i,r,a,d]}class gt extends Y{constructor(e){super(),U(this,e,li,ri,z,{step:0,maxLeng:4,main:5})}}function Ee(t,e,n){const i=t.slice();return i[5]=e[n],i[7]=n,i}function Oe(t,e,n){const i=t.slice();return i[8]=e[n],i}function Me(t,e,n){const i=t.slice();return i[8]=e[n],i}function Te(t){let e,n;return e=new gt({props:{step:t[8],maxLeng:t[0].memory.maxLeng,main:t[0]}}),{c(){P(e.$$.fragment)},m(i,s){q(e,i,s),n=!0},p(i,s){const o={};s&1&&(o.step=i[8]),s&1&&(o.maxLeng=i[0].memory.maxLeng),s&1&&(o.main=i[0]),e.$set(o)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function De(t){let e,n;return e=new gt({props:{step:t[8],maxLeng:t[0].memory.maxLeng,main:t[0]}}),{c(){P(e.$$.fragment)},m(i,s){q(e,i,s),n=!0},p(i,s){const o={};s&1&&(o.step=i[8]),s&1&&(o.maxLeng=i[0].memory.maxLeng),s&1&&(o.main=i[0]),e.$set(o)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function qe(t){let e,n,i,s,o;function r(...u){return t[2](t[7],...u)}n=new lt({props:{algoOptions:[...ce],selectedOption:t[5],algoDescription:ht,onChange:r}});let a=W(t[0].memory.steps[t[7]+1]),l=[];for(let u=0;u<a.length;u+=1)l[u]=De(Oe(t,a,u));const d=u=>k(l[u],1,1,()=>{l[u]=null});return{c(){e=C("div"),P(n.$$.fragment),i=j();for(let u=0;u<l.length;u+=1)l[u].c();s=ie(),_(e,"title","optimization Algorithm")},m(u,g){T(u,e,g),q(n,e,null),T(u,i,g);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(u,g);T(u,s,g),o=!0},p(u,g){t=u;const m={};if(g&1&&(m.selectedOption=t[5]),g&1&&(m.onChange=r),n.$set(m),g&1){a=W(t[0].memory.steps[t[7]+1]);let h;for(h=0;h<a.length;h+=1){const N=Oe(t,a,h);l[h]?(l[h].p(N,g),v(l[h],1)):(l[h]=De(N),l[h].c(),v(l[h],1),l[h].m(s.parentNode,s))}for(H(),h=a.length;h<l.length;h+=1)d(h);K()}},i(u){if(!o){v(n.$$.fragment,u);for(let g=0;g<a.length;g+=1)v(l[g]);o=!0}},o(u){k(n.$$.fragment,u),l=l.filter(Boolean);for(let g=0;g<l.length;g+=1)k(l[g]);o=!1},d(u){u&&(O(e),O(i),O(s)),F(n),V(l,u)}}}function Fe(t){let e,n;return e=new rt({props:{text:"add algorithm"}}),e.$on("click",t[3]),{c(){P(e.$$.fragment)},m(i,s){q(e,i,s),n=!0},p:M,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function Pe(t){let e,n;return e=new rt({props:{text:"remove algorithm"}}),e.$on("click",t[4]),{c(){P(e.$$.fragment)},m(i,s){q(e,i,s),n=!0},p:M,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function ai(t){let e,n,i,s,o,r,a,l;i=new lt({props:{algoOptions:[...ft],selectedOption:t[0].selectedAlgos.initAlgo,algoDescription:ht,onChange:t[1]}});let d=W(t[0].memory.steps[0]),u=[];for(let p=0;p<d.length;p+=1)u[p]=Te(Me(t,d,p));const g=p=>k(u[p],1,1,()=>{u[p]=null});let m=W(t[0].selectedAlgos.optimAlgoStack),h=[];for(let p=0;p<m.length;p+=1)h[p]=qe(Ee(t,m,p));const N=p=>k(h[p],1,1,()=>{h[p]=null});let I=t[0].selectedAlgos.optimAlgoStack.length+1<=Ie&&Fe(t),w=t[0].selectedAlgos.optimAlgoStack.length>0&&Pe(t);return{c(){e=C("div"),n=C("div"),P(i.$$.fragment),s=j();for(let p=0;p<u.length;p+=1)u[p].c();o=j();for(let p=0;p<h.length;p+=1)h[p].c();r=j(),I&&I.c(),a=j(),w&&w.c(),_(n,"title","initialization Algorithm"),_(e,"class","container svelte-risjyu")},m(p,b){T(p,e,b),R(e,n),q(i,n,null),R(e,s);for(let A=0;A<u.length;A+=1)u[A]&&u[A].m(e,null);R(e,o);for(let A=0;A<h.length;A+=1)h[A]&&h[A].m(e,null);R(e,r),I&&I.m(e,null),R(e,a),w&&w.m(e,null),l=!0},p(p,[b]){const A={};if(b&1&&(A.selectedOption=p[0].selectedAlgos.initAlgo),b&1&&(A.onChange=p[1]),i.$set(A),b&1){d=W(p[0].memory.steps[0]);let L;for(L=0;L<d.length;L+=1){const X=Me(p,d,L);u[L]?(u[L].p(X,b),v(u[L],1)):(u[L]=Te(X),u[L].c(),v(u[L],1),u[L].m(e,o))}for(H(),L=d.length;L<u.length;L+=1)g(L);K()}if(b&1){m=W(p[0].selectedAlgos.optimAlgoStack);let L;for(L=0;L<m.length;L+=1){const X=Ee(p,m,L);h[L]?(h[L].p(X,b),v(h[L],1)):(h[L]=qe(X),h[L].c(),v(h[L],1),h[L].m(e,r))}for(H(),L=m.length;L<h.length;L+=1)N(L);K()}p[0].selectedAlgos.optimAlgoStack.length+1<=Ie?I?(I.p(p,b),b&1&&v(I,1)):(I=Fe(p),I.c(),v(I,1),I.m(e,a)):I&&(H(),k(I,1,1,()=>{I=null}),K()),p[0].selectedAlgos.optimAlgoStack.length>0?w?(w.p(p,b),b&1&&v(w,1)):(w=Pe(p),w.c(),v(w,1),w.m(e,null)):w&&(H(),k(w,1,1,()=>{w=null}),K())},i(p){if(!l){v(i.$$.fragment,p);for(let b=0;b<d.length;b+=1)v(u[b]);for(let b=0;b<m.length;b+=1)v(h[b]);v(I),v(w),l=!0}},o(p){k(i.$$.fragment,p),u=u.filter(Boolean);for(let b=0;b<u.length;b+=1)k(u[b]);h=h.filter(Boolean);for(let b=0;b<h.length;b+=1)k(h[b]);k(I),k(w),l=!1},d(p){p&&O(e),F(i),V(u,p),V(h,p),I&&I.d(),w&&w.d()}}}function ui(t,e,n){let{main:i}=e;const s=l=>i.changeInitAlgo(l),o=(l,d)=>i.changeOptimAlgo(d,l),r=()=>i.addOptimAlgo(),a=()=>i.removeOptimAlgo();return t.$$set=l=>{"main"in l&&n(0,i=l.main)},[i,s,o,r,a]}class ci extends Y{constructor(e){super(),U(this,e,ui,ai,z,{main:0})}}class di{constructor(){S(this,"initAlgo",ft[1]);S(this,"optimAlgoStack",[ce[0],ce[1]])}all(){return[this.initAlgo,...this.optimAlgoStack]}}class fi{constructor(){S(this,"steps",[]);S(this,"nSteps",0);S(this,"nodes",new at);S(this,"maxLeng",0)}addRandomNodes(e=1){for(let n=0;n<e;n++)this.nodes.add(Math.random(),Math.random())}adjustNumberOfNodes(e){if(this.nodes.count()<e)this.addRandomNodes(e-this.nodes.count());else if(this.nodes.count()>e){let n=[...this.nodes.all()].slice(e);for(let i of n)this.nodes.delete(i)}}runAlgos(e){this.steps=[],this.maxLeng=0;let n=0,i=new ct(this.nodes);for(let s of e){let o=[];const r=()=>{let a=i.totalLength();this.maxLeng=Math.max(a,this.maxLeng);let l=new ut(i.edges);o.push({edges:l,len:a,index:n}),n++,this.nSteps=n};s==e[0]&&r();for(let a of oi(i,s))r();if(s==e[e.length-1])for(let a=0;a<it;a++)r();o.length==0&&r(),this.steps.push(o)}}}class hi{constructor(e,n,i,s){this.name=e,this.priority=n,this.complete=i,this.isUnique=s}}class gi{constructor(){S(this,"queue",[])}add(e,n,i,s=!0){const o=new hi(e,i,n,s);o.isUnique&&this.queue.map(r=>r.name).includes(o.name)||(this.queue.push(o),this.doAllAsync())}doNext(){if(this.queue.length==0)return;const e=this.queue.map(o=>o.priority),n=Math.max(...e),i=e.indexOf(n),s=this.queue[i];this.queue.splice(i,1),console.log(`Doing task: ${s.name} [time = ${performance.now()}]`),s.complete()}doAll(){for(;this.queue.length>0;)this.doNext()}doAllAsync(){this.queue.length!=0&&requestAnimationFrame(()=>{this.doNext(),this.doAllAsync()})}}class mi{constructor(e,n){S(this,"memory",new fi);S(this,"selectedAlgos",new di);S(this,"virtualScroll",.999);S(this,"todo",new gi);S(this,"renderedStep",0);S(this,"stepsToRender",[]);this.renderCanvasCallback=e,this.renderInputCallback=n,this.adjustNumberOfNodes(30),this.renderInput(),this.renderCanvas(),this.todo.doAll()}renderCanvas(){const e=()=>{this.renderCanvasCallback()};this.todo.add("render",e,0)}addNode(e,n){const i=()=>{this.memory.nodes.count()>=st||(this.memory.nodes.add(e,n),this.runAlgos(),this.updateRenderedStep())};this.todo.add("add node",i,2,!1)}adjustNumberOfNodes(e){const n=()=>{this.memory.adjustNumberOfNodes(e),this.runAlgos(),this.updateRenderedStep()};this.todo.add("adjust number of nodes",n,2.1,!1)}runAlgos(){const e=()=>{this.memory.runAlgos(this.selectedAlgos.all()),this.renderInput(),this.updateStepsToRender(),this.updateRenderedStep()};this.todo.add("run algorithms",e,1)}renderInput(){const e=()=>{this.renderInputCallback()};this.todo.add("render sidebar",e,0)}changeInitAlgo(e){const n=()=>{this.selectedAlgos.initAlgo=e,this.runAlgos()};this.todo.add("change init algo",n,2.2,!1)}changeOptimAlgo(e,n){const i=()=>{this.selectedAlgos.optimAlgoStack[n]=e,this.runAlgos()};this.todo.add("change optim algo",i,2.2,!1)}addOptimAlgo(){const e=()=>{this.selectedAlgos.optimAlgoStack.push(ce[0]),this.runAlgos(),this.renderInput(),this.updateRenderedStep()};this.todo.add("add optim algo",e,2.3,!1)}removeOptimAlgo(){const e=()=>{this.selectedAlgos.optimAlgoStack.pop(),this.runAlgos(),this.renderInput()};this.todo.add("remove optim algo",e,2.3,!1)}setVirtualScroll(e){const n=()=>{this.virtualScroll=e,this.updateRenderedStep()};this.todo.add("set virtual scroll",n,.6)}moveNode(e,n){const i=()=>{this.memory.nodes.setCoords(e,n),this.runAlgos()};this.todo.add("move node",i,2.4,!1)}updateRenderedStep(){const e=()=>{const n=this.renderedStep;this.renderedStep=Math.floor(this.memory.nSteps*this.virtualScroll),n!==this.renderedStep&&(this.renderInput(),this.updateStepsToRender())};this.todo.add("set rendered step",e,.6)}updateStepsToRender(){const e=()=>{this.stepsToRender=this.memory.steps.flat().slice(Math.max(this.renderedStep-it,0),this.renderedStep+1).reverse().map(n=>[...n.edges.all()]),this.renderCanvas()};this.todo.add("update the steps which are rendered",e,.5)}}function pi(t){let e,n,i,s,o,r,a;return i=new ci({props:{main:t[0]}}),r=new Wn({props:{text:"Number of Points",value:t[0].memory.nodes.count(),min:Pn,max:st,onInput:t[2]}}),{c(){e=C("div"),n=C("div"),P(i.$$.fragment),s=j(),o=C("div"),P(r.$$.fragment),_(n,"class","stack svelte-1ggf4bk"),_(o,"class","slider svelte-1ggf4bk"),_(e,"class","container svelte-1ggf4bk"),E(e,"width",Fn.px())},m(l,d){T(l,e,d),R(e,n),q(i,n,null),R(e,s),R(e,o),q(r,o,null),t[3](e),a=!0},p(l,[d]){const u={};d&1&&(u.main=l[0]),i.$set(u);const g={};d&1&&(g.value=l[0].memory.nodes.count()),d&1&&(g.onInput=l[2]),r.$set(g)},i(l){a||(v(i.$$.fragment,l),v(r.$$.fragment,l),a=!0)},o(l){k(i.$$.fragment,l),k(r.$$.fragment,l),a=!1},d(l){l&&O(e),F(i),F(r),t[3](null)}}}function _i(t,e,n){let{main:i}=e,s;function o(l){if(Math.abs(l.deltaY)<.2)return;let d=i.virtualScroll+l.deltaY/i.memory.nSteps*jn;d=Math.max(d,0),d=Math.min(d,.9999),i.setVirtualScroll(d)}xe(()=>{s.addEventListener("wheel",o)});const r=l=>i.adjustNumberOfNodes(l);function a(l){G[l?"unshift":"push"](()=>{s=l,n(1,s)})}return t.$$set=l=>{"main"in l&&n(0,i=l.main)},[i,s,r,a]}class vi extends Y{constructor(e){super(),U(this,e,_i,pi,z,{main:0})}}class yi{constructor(){S(this,"currentLayerId");S(this,"setups");S(this,"renderers");S(this,"dispatchers");S(this,"needsSetup");S(this,"needsRedraw");S(this,"context");S(this,"width");S(this,"height");S(this,"autoclear");S(this,"pixelRatio");S(this,"renderLoop");S(this,"layerObserver");S(this,"layerRef");S(this,"layerSequence");S(this,"renderingLayerId");S(this,"activeLayerId");S(this,"activeLayerDispatcher");this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.getRenderingLayerId=this.getRenderingLayerId.bind(this),this.currentLayerId=1,this.setups=new Map,this.renderers=new Map,this.dispatchers=new Map,this.needsSetup=!1,this.needsRedraw=!0,this.renderingLayerId=0,this.activeLayerId=0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}register({setup:e,render:n,dispatcher:i}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,n),this.dispatchers.set(this.currentLayerId,i),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.dispatchers.delete(e),this.needsRedraw=!0}setup(e,n){this.context=e,this.layerRef=n,this.observeLayerSequence(),this.startRenderLoop()}observeLayerSequence(){this.layerObserver=new MutationObserver(this.getLayerSequence.bind(this)),this.layerObserver.observe(this.layerRef,{childList:!0}),this.getLayerSequence()}getLayerSequence(){const e=[...this.layerRef.children];this.layerSequence=e.map(n=>+(n.dataset.layerId??-1)),this.redraw()}startRenderLoop(){this.render(),this.renderLoop=requestAnimationFrame(()=>this.startRenderLoop())}render(){var o;const e=this.context,n=this.width,i=this.height,s=this.pixelRatio;if(this.needsSetup){for(const[r,a]of this.setups)a({context:e,width:n,height:i}),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e.setTransform(s,0,0,s,0,0),this.autoclear&&e.clearRect(0,0,n,i);for(const r of this.layerSequence)this.renderingLayerId=r,(o=this.renderers.get(r))==null||o({context:e,width:n,height:i});this.needsRedraw=!1}}setActiveLayer(e,n){this.activeLayerId!==e&&(n instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerleave",n)),this.dispatchLayerEvent(new MouseEvent("mouseleave",n))),this.activeLayerId=e,this.activeLayerDispatcher=this.dispatchers.get(e),n instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerenter",n)),this.dispatchLayerEvent(new MouseEvent("mouseenter",n))))}dispatchLayerEvent(e){if(this.activeLayerDispatcher){if(window.TouchEvent&&e instanceof TouchEvent){const{left:n,top:i}=e.target.getBoundingClientRect(),{clientX:s,clientY:o}=e.changedTouches[0],r={x:s-n,y:o-i,originalEvent:e};this.activeLayerDispatcher(e.type,r)}else if(e instanceof MouseEvent){const n={x:e.offsetX,y:e.offsetY,originalEvent:e};this.activeLayerDispatcher(e.type,n)}}}getRenderingLayerId(){return this.renderingLayerId}destroy(){typeof window>"u"||(this.layerObserver.disconnect(),cancelAnimationFrame(this.renderLoop))}}const wi=t=>{const e=t*2,n=e>>16&255,i=e>>8&255,s=e&255;return`rgb(${n}, ${i}, ${s})`},bi=(t,e,n)=>{const i=(t<<16|e<<8|n)/2;return i%1?0:i},Li=["drawImage"],Si=["filter","shadowBlur","globalCompositeOperation","globalAlpha"],ki=["drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],Ai=t=>{let e;const n=document.createElement("canvas"),i=n.getContext("2d",{willReadFrequently:!0}),s=()=>{n.width=t.canvas.width,n.height=t.canvas.height};return new MutationObserver(s).observe(t.canvas,{attributeFilter:["width","height"]}),s(),new Proxy(t,{get(r,a){if(a==="_getLayerIdAtPixel")return(d,u)=>{const[g,m,h]=i.getImageData(d,u,1,1).data;return bi(g,m,h)};const l=r[a];return typeof l!="function"?l:function(...d){if(ki.includes(a)){const u=wi(e());i.fillStyle=u,i.strokeStyle=u}if(a==="drawImage"){const u=d.slice(1);i.fillRect(...u)}return Li.includes(a)||Reflect.apply(l,i,d),Reflect.apply(l,r,d)}},set(r,a,l){return a==="_renderingLayerId"?(e=l,!0):(r[a]=l,Si.includes(a)||(i[a]=l),!0)}})};function Ii(t){let e,n,i,s=`${t[0]}px`,o=`${t[1]}px`,r,a,l,d,u;const g=t[18].default,m=Je(g,t,t[17],null);return{c(){e=C("canvas"),r=j(),a=C("div"),m&&m.c(),_(e,"width",n=t[0]*t[5]),_(e,"height",i=t[1]*t[5]),_(e,"class",t[4]),_(e,"style",t[2]),E(e,"display","block"),E(e,"width",s),E(e,"height",o),E(a,"display","none")},m(h,N){T(h,e,N),t[64](e),T(h,r,N),T(h,a,N),m&&m.m(a,null),t[65](a),l=!0,d||(u=[f(e,"touchstart",re(function(){D(t[3]?t[9]:null)&&(t[3]?t[9]:null).apply(this,arguments)})),f(e,"mousemove",function(){D(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),f(e,"pointermove",function(){D(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),f(e,"click",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"contextmenu",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"dblclick",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"mousedown",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"mouseenter",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"mouseleave",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"mouseup",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"wheel",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"touchcancel",re(function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),f(e,"touchend",re(function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),f(e,"touchmove",re(function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),f(e,"pointerenter",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"pointerleave",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"pointerdown",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"pointerup",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"pointercancel",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),f(e,"focus",t[19]),f(e,"blur",t[20]),f(e,"fullscreenchange",t[21]),f(e,"fullscreenerror",t[22]),f(e,"scroll",t[23]),f(e,"cut",t[24]),f(e,"copy",t[25]),f(e,"paste",t[26]),f(e,"keydown",t[27]),f(e,"keypress",t[28]),f(e,"keyup",t[29]),f(e,"auxclick",t[30]),f(e,"click",t[31]),f(e,"contextmenu",t[32]),f(e,"dblclick",t[33]),f(e,"mousedown",t[34]),f(e,"mouseenter",t[35]),f(e,"mouseleave",t[36]),f(e,"mousemove",t[37]),f(e,"mouseover",t[38]),f(e,"mouseout",t[39]),f(e,"mouseup",t[40]),f(e,"select",t[41]),f(e,"wheel",t[42]),f(e,"drag",t[43]),f(e,"dragend",t[44]),f(e,"dragenter",t[45]),f(e,"dragstart",t[46]),f(e,"dragleave",t[47]),f(e,"dragover",t[48]),f(e,"drop",t[49]),f(e,"touchcancel",t[50]),f(e,"touchend",t[51]),f(e,"touchmove",t[52]),f(e,"touchstart",t[53]),f(e,"pointerover",t[54]),f(e,"pointerenter",t[55]),f(e,"pointerdown",t[56]),f(e,"pointermove",t[57]),f(e,"pointerup",t[58]),f(e,"pointercancel",t[59]),f(e,"pointerout",t[60]),f(e,"pointerleave",t[61]),f(e,"gotpointercapture",t[62]),f(e,"lostpointercapture",t[63])],d=!0)},p(h,N){t=h,(!l||N[0]&33&&n!==(n=t[0]*t[5]))&&_(e,"width",n),(!l||N[0]&34&&i!==(i=t[1]*t[5]))&&_(e,"height",i),(!l||N[0]&16)&&_(e,"class",t[4]),(!l||N[0]&4)&&_(e,"style",t[2]);const I=N[0]&4;I&&E(e,"display","block"),(I||N[0]&5&&s!==(s=`${t[0]}px`))&&E(e,"width",s),(I||N[0]&6&&o!==(o=`${t[1]}px`))&&E(e,"height",o),m&&m.p&&(!l||N[0]&131072)&&Ze(m,g,t,t[17],l?Ve(g,t[17],N,null):$e(t[17]),null)},i(h){l||(v(m,h),l=!0)},o(h){k(m,h),l=!1},d(h){h&&(O(e),O(r),O(a)),t[64](null),m&&m.d(h),t[65](null),d=!1,J(u)}}}const mt=Symbol(),Ni=()=>In(mt);function Ri(t,e,n){let i,{$$slots:s={},$$scope:o}=e,{width:r=640,height:a=640,pixelRatio:l=null,style:d="",autoclear:u=!0,layerEvents:g=!1}=e,{class:m=""}=e,h,N=null,I;const w=new yi;function p(){w.redraw()}function b(){return h}function A(){return N}l==null&&(typeof window<"u"?l=window.devicePixelRatio:l=2),An(mt,{register:w.register,unregister:w.unregister,redraw:w.redraw}),xe(()=>{const c=h.getContext("2d");g?(N=Ai(c),N._renderingLayerId=w.getRenderingLayerId):N=c,w.setup(N,I)}),et(()=>w.destroy());const L=c=>{const he=c.offsetX*i,ge=c.offsetY*i,me=N._getLayerIdAtPixel(he,ge);w.setActiveLayer(me,c),w.dispatchLayerEvent(c)},X=c=>{const{clientX:he,clientY:ge}=c.changedTouches[0],{left:me,top:fn}=h.getBoundingClientRect(),hn=(he-me)*i,gn=(ge-fn)*i,mn=N._getLayerIdAtPixel(hn,gn);w.setActiveLayer(mn,c),w.dispatchLayerEvent(c)},_t=c=>{window.TouchEvent&&c instanceof TouchEvent&&c.preventDefault(),w.dispatchLayerEvent(c)};function vt(c){y.call(this,t,c)}function yt(c){y.call(this,t,c)}function wt(c){y.call(this,t,c)}function bt(c){y.call(this,t,c)}function Lt(c){y.call(this,t,c)}function St(c){y.call(this,t,c)}function kt(c){y.call(this,t,c)}function At(c){y.call(this,t,c)}function It(c){y.call(this,t,c)}function Nt(c){y.call(this,t,c)}function Rt(c){y.call(this,t,c)}function Ct(c){y.call(this,t,c)}function Et(c){y.call(this,t,c)}function Ot(c){y.call(this,t,c)}function Mt(c){y.call(this,t,c)}function Tt(c){y.call(this,t,c)}function Dt(c){y.call(this,t,c)}function qt(c){y.call(this,t,c)}function Ft(c){y.call(this,t,c)}function Pt(c){y.call(this,t,c)}function zt(c){y.call(this,t,c)}function Bt(c){y.call(this,t,c)}function jt(c){y.call(this,t,c)}function Ut(c){y.call(this,t,c)}function Yt(c){y.call(this,t,c)}function Wt(c){y.call(this,t,c)}function Xt(c){y.call(this,t,c)}function Ht(c){y.call(this,t,c)}function Kt(c){y.call(this,t,c)}function Gt(c){y.call(this,t,c)}function Jt(c){y.call(this,t,c)}function Qt(c){y.call(this,t,c)}function Vt(c){y.call(this,t,c)}function Zt(c){y.call(this,t,c)}function $t(c){y.call(this,t,c)}function xt(c){y.call(this,t,c)}function en(c){y.call(this,t,c)}function tn(c){y.call(this,t,c)}function nn(c){y.call(this,t,c)}function sn(c){y.call(this,t,c)}function on(c){y.call(this,t,c)}function rn(c){y.call(this,t,c)}function ln(c){y.call(this,t,c)}function an(c){y.call(this,t,c)}function un(c){y.call(this,t,c)}function cn(c){G[c?"unshift":"push"](()=>{h=c,n(6,h)})}function dn(c){G[c?"unshift":"push"](()=>{I=c,n(7,I)})}return t.$$set=c=>{"width"in c&&n(0,r=c.width),"height"in c&&n(1,a=c.height),"pixelRatio"in c&&n(11,l=c.pixelRatio),"style"in c&&n(2,d=c.style),"autoclear"in c&&n(12,u=c.autoclear),"layerEvents"in c&&n(3,g=c.layerEvents),"class"in c&&n(4,m=c.class),"$$scope"in c&&n(17,o=c.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2048&&n(5,i=l??1),t.$$.dirty[0]&1&&n(16,w.width=r,w),t.$$.dirty[0]&2&&n(16,w.height=a,w),t.$$.dirty[0]&32&&n(16,w.pixelRatio=i,w),t.$$.dirty[0]&4096&&n(16,w.autoclear=u,w),t.$$.dirty[0]&71683&&w.redraw()},[r,a,d,g,m,i,h,I,L,X,_t,l,u,p,b,A,w,o,s,vt,yt,wt,bt,Lt,St,kt,At,It,Nt,Rt,Ct,Et,Ot,Mt,Tt,Dt,qt,Ft,Pt,zt,Bt,jt,Ut,Yt,Wt,Xt,Ht,Kt,Gt,Jt,Qt,Vt,Zt,$t,xt,en,tn,nn,sn,on,rn,ln,an,un,cn,dn]}class Ci extends Y{constructor(e){super(),U(this,e,Ri,Ii,z,{width:0,height:1,pixelRatio:11,style:2,autoclear:12,layerEvents:3,class:4,redraw:13,getCanvas:14,getContext:15},null,[-1,-1,-1])}get redraw(){return this.$$.ctx[13]}get getCanvas(){return this.$$.ctx[14]}get getContext(){return this.$$.ctx[15]}}function Ei(t){let e;return{c(){e=C("div"),_(e,"data-layer-id",t[0])},m(n,i){T(n,e,i)},p:M,i:M,o:M,d(n){n&&O(e)}}}function Oi(t,e,n){const{register:i,unregister:s,redraw:o}=Ni(),r=kn();let{setup:a=void 0}=e,{render:l=()=>{}}=e;const d=i({setup:a,render:l,dispatcher:r});return et(()=>s(d)),t.$$set=u=>{"setup"in u&&n(1,a=u.setup),"render"in u&&n(2,l=u.render)},t.$$.update=()=>{t.$$.dirty&4&&o()},[d,a,l]}class pt extends Y{constructor(e){super(),U(this,e,Oi,Ei,z,{setup:1,render:2})}}function Mi(t){let e;const n=t[2].default,i=Je(n,t,t[3],null);return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),e=!0},p(s,o){i&&i.p&&(!e||o&8)&&Ze(i,n,s,s[3],e?Ve(n,s[3],o,null):$e(s[3]),null)},i(s){e||(v(i,s),e=!0)},o(s){k(i,s),e=!1},d(s){i&&i.d(s)}}}function Ti(t){let e,n,i;return n=new Ci({props:{width:t[0],height:t[1],$$slots:{default:[Mi]},$$scope:{ctx:t}}}),{c(){e=C("div"),P(n.$$.fragment),_(e,"class","svelte-1katzbq")},m(s,o){T(s,e,o),q(n,e,null),i=!0},p(s,[o]){const r={};o&1&&(r.width=s[0]),o&2&&(r.height=s[1]),o&8&&(r.$$scope={dirty:o,ctx:s}),n.$set(r)},i(s){i||(v(n.$$.fragment,s),i=!0)},o(s){k(n.$$.fragment,s),i=!1},d(s){s&&O(e),F(n)}}}function Di(t,e,n){let{$$slots:i={},$$scope:s}=e,{width:o=0}=e,{height:r=0}=e;return t.$$set=a=>{"width"in a&&n(0,o=a.width),"height"in a&&n(1,r=a.height),"$$scope"in a&&n(3,s=a.$$scope)},[o,r,i,s]}class qi extends Y{constructor(e){super(),U(this,e,Di,Ti,z,{width:0,height:1})}}function Fi(t){let e,n;return e=new pt({props:{render:t[0]}}),{c(){P(e.$$.fragment)},m(i,s){q(e,i,s),n=!0},p:M,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function Pi(t,e,n){let i,s,{coords:o}=e;const r=({context:a,width:l,height:d})=>{a.fillStyle="white",a.beginPath(),a.arc(i*l,s*d,Dn,0,2*Math.PI),a.fill()};return t.$$set=a=>{"coords"in a&&n(1,o=a.coords)},t.$$.update=()=>{t.$$.dirty&2&&([i,s]=o)},[r,o]}class zi extends Y{constructor(e){super(),U(this,e,Pi,Fi,z,{coords:1})}}function ze(t,e,n){const i=t.slice();return i[1]=e[n],i}function Be(t){let e,n;return e=new zi({props:{coords:t[0].memory.nodes.getCoords(t[1])}}),{c(){P(e.$$.fragment)},m(i,s){q(e,i,s),n=!0},p(i,s){const o={};s&1&&(o.coords=i[0].memory.nodes.getCoords(i[1])),e.$set(o)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function Bi(t){let e,n,i=W(t[0].memory.nodes.all()),s=[];for(let r=0;r<i.length;r+=1)s[r]=Be(ze(t,i,r));const o=r=>k(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=ie()},m(r,a){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(r,a);T(r,e,a),n=!0},p(r,[a]){if(a&1){i=W(r[0].memory.nodes.all());let l;for(l=0;l<i.length;l+=1){const d=ze(r,i,l);s[l]?(s[l].p(d,a),v(s[l],1)):(s[l]=Be(d),s[l].c(),v(s[l],1),s[l].m(e.parentNode,e))}for(H(),l=i.length;l<s.length;l+=1)o(l);K()}},i(r){if(!n){for(let a=0;a<i.length;a+=1)v(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)k(s[a]);n=!1},d(r){r&&O(e),V(s,r)}}}function ji(t,e,n){let{main:i}=e;return t.$$set=s=>{"main"in s&&n(0,i=s.main)},[i]}class Ui extends Y{constructor(e){super(),U(this,e,ji,Bi,z,{main:0})}}function Yi(t){let e,n;return e=new pt({props:{render:t[0]}}),{c(){P(e.$$.fragment)},m(i,s){q(e,i,s),n=!0},p:M,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function Wi(t,e,n){let i,s,o,r,{coords:a}=e,{opacity:l=1}=e;const d=({context:u,width:g,height:m})=>{u.beginPath(),u.moveTo(i*g,s*m),u.lineTo(o*g,r*m),u.strokeStyle=nt(l),u.lineWidth=qn,u.stroke()};return t.$$set=u=>{"coords"in u&&n(1,a=u.coords),"opacity"in u&&n(2,l=u.opacity)},t.$$.update=()=>{t.$$.dirty&2&&([[i,s],[o,r]]=a)},[d,a,l]}class Xi extends Y{constructor(e){super(),U(this,e,Wi,Yi,z,{coords:1,opacity:2})}}function je(t,e,n){const i=t.slice();return i[1]=e[n],i[3]=n,i}function Ue(t,e,n){const i=t.slice();return i[4]=e[n],i}function Ye(t){let e,n;return e=new Xi({props:{coords:[t[0].memory.nodes.getCoords(t[4][0]),t[0].memory.nodes.getCoords(t[4][1])],opacity:Math.pow(Tn,-t[3])}}),{c(){P(e.$$.fragment)},m(i,s){q(e,i,s),n=!0},p(i,s){const o={};s&1&&(o.coords=[i[0].memory.nodes.getCoords(i[4][0]),i[0].memory.nodes.getCoords(i[4][1])]),e.$set(o)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function We(t){let e,n,i=W(t[1]),s=[];for(let r=0;r<i.length;r+=1)s[r]=Ye(Ue(t,i,r));const o=r=>k(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=ie()},m(r,a){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(r,a);T(r,e,a),n=!0},p(r,a){if(a&1){i=W(r[1]);let l;for(l=0;l<i.length;l+=1){const d=Ue(r,i,l);s[l]?(s[l].p(d,a),v(s[l],1)):(s[l]=Ye(d),s[l].c(),v(s[l],1),s[l].m(e.parentNode,e))}for(H(),l=i.length;l<s.length;l+=1)o(l);K()}},i(r){if(!n){for(let a=0;a<i.length;a+=1)v(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)k(s[a]);n=!1},d(r){r&&O(e),V(s,r)}}}function Hi(t){let e,n,i=W(t[0].stepsToRender),s=[];for(let r=0;r<i.length;r+=1)s[r]=We(je(t,i,r));const o=r=>k(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=ie()},m(r,a){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(r,a);T(r,e,a),n=!0},p(r,[a]){if(a&1){i=W(r[0].stepsToRender);let l;for(l=0;l<i.length;l+=1){const d=je(r,i,l);s[l]?(s[l].p(d,a),v(s[l],1)):(s[l]=We(d),s[l].c(),v(s[l],1),s[l].m(e.parentNode,e))}for(H(),l=i.length;l<s.length;l+=1)o(l);K()}},i(r){if(!n){for(let a=0;a<i.length;a+=1)v(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)k(s[a]);n=!1},d(r){r&&O(e),V(s,r)}}}function Ki(t,e,n){let{main:i}=e;return t.$$set=s=>{"main"in s&&n(0,i=s.main)},[i]}class Gi extends Y{constructor(e){super(),U(this,e,Ki,Hi,z,{main:0})}}function Xe(t){let e;return{c(){e=C("span"),e.textContent=`Watch various algorithms solve the traveling salesman problem. A\r
            salesman traveling from city to city wants to minimize the total\r
            distance traveled before returning to his starting point. Scroll on\r
            the bar in the right to see the steps the algorithm took. Select\r
            different algorithms to see how they compare. Click on the canvas to\r
            add cities. Drag cities to move them.`,_(e,"class","hover-text svelte-gdn3ad"),E(e,"color",oe)},m(n,i){T(n,e,i)},d(n){n&&O(e)}}}function Ji(t){let e,n,i,s,o,r,a,l,d=t[0]&&Xe();return{c(){e=C("div"),n=C("div"),i=C("div"),s=j(),o=C("button"),o.textContent="info",r=j(),d&&d.c(),_(i,"id","placeholder"),_(i,"class","svelte-gdn3ad"),_(o,"class","square-button svelte-gdn3ad"),E(o,"background-color",fe),E(o,"color",oe),_(n,"id","info-button"),_(n,"class","svelte-gdn3ad"),_(e,"id","container"),_(e,"class","svelte-gdn3ad")},m(u,g){T(u,e,g),R(e,n),R(n,i),R(n,s),R(n,o),R(e,r),d&&d.m(e,null),a||(l=[f(e,"mouseover",t[1]),f(e,"mouseout",t[2])],a=!0)},p(u,[g]){u[0]?d||(d=Xe(),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i:M,o:M,d(u){u&&O(e),d&&d.d(),a=!1,J(l)}}}function Qi(t,e,n){let i=!1;return[i,()=>n(0,i=!0),()=>n(0,i=!1)]}class Vi extends Y{constructor(e){super(),U(this,e,Qi,Ji,z,{})}}class Zi{constructor(e){S(this,"moveListenerFunction");this.main=e}handleMousedown(e,n,i){const s=e.target.getBoundingClientRect(),o=(e.clientX-s.left)/n,r=(e.clientY-s.top)/i;let a=this.main.memory.nodes.findNearNode([o,r],Ae/Math.max(n,i));a===void 0&&(this.main.addNode(o,r),a=this.main.memory.nodes.findNearNode([o,r],Ae/Math.max(n,i)),a===void 0)||this.startToDragNode(a,n,i)}startToDragNode(e,n,i){this.moveListenerFunction!==void 0&&this.stopToDragNode(),this.moveListenerFunction=s=>{const o=s.target.getBoundingClientRect(),r=(s.clientX-o.left)/n,a=(s.clientY-o.top)/i;this.main.moveNode(e,[r,a])},window.addEventListener("mousemove",this.moveListenerFunction)}stopToDragNode(){this.moveListenerFunction!==void 0&&window.removeEventListener("mousemove",this.moveListenerFunction)}handleMouseup(){this.stopToDragNode()}handleMouseLeave(){this.stopToDragNode()}}function He(t){let e,n,i,s;return e=new Ui({props:{main:t[4]}}),i=new Gi({props:{main:t[4]}}),{c(){P(e.$$.fragment),n=j(),P(i.$$.fragment)},m(o,r){q(e,o,r),T(o,n,r),q(i,o,r),s=!0},p:M,i(o){s||(v(e.$$.fragment,o),v(i.$$.fragment,o),s=!0)},o(o){k(e.$$.fragment,o),k(i.$$.fragment,o),s=!1},d(o){o&&O(n),F(e,o),F(i,o)}}}function $i(t){let e=t[2],n,i,s=He(t);return{c(){s.c(),n=ie()},m(o,r){s.m(o,r),T(o,n,r),i=!0},p(o,r){r&4&&z(e,e=o[2])?(H(),k(s,1,1,M),K(),s=He(o),s.c(),v(s,1),s.m(n.parentNode,n)):s.p(o,r)},i(o){i||(v(s),i=!0)},o(o){k(s),i=!1},d(o){o&&O(n),s.d(o)}}}function Ke(t){let e,n;return e=new vi({props:{main:t[4]}}),{c(){P(e.$$.fragment)},m(i,s){q(e,i,s),n=!0},p:M,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function xi(t){let e,n,i,s,o,r,a,l,d=t[3],u,g,m,h,N;function I(A){t[6](A)}function w(A){t[7](A)}let p={$$slots:{default:[$i]},$$scope:{ctx:t}};t[0]!==void 0&&(p.width=t[0]),t[1]!==void 0&&(p.height=t[1]),i=new qi({props:p}),G.push(()=>ke(i,"width",I)),G.push(()=>ke(i,"height",w));let b=Ke(t);return g=new Vi({}),{c(){e=C("div"),n=C("div"),P(i.$$.fragment),a=j(),l=C("div"),b.c(),u=j(),P(g.$$.fragment),_(n,"id","canvas"),_(n,"class","svelte-17jin7h"),ue(()=>t[8].call(n)),_(l,"id","input"),_(e,"id","app"),_(e,"class","svelte-17jin7h")},m(A,L){T(A,e,L),R(e,n),q(i,n,null),r=Ln(n,t[8].bind(n)),R(e,a),R(e,l),b.m(l,null),R(e,u),q(g,e,null),m=!0,h||(N=[f(n,"mousedown",t[9]),f(n,"mouseup",t[10]),f(n,"mouseleave",t[11])],h=!0)},p(A,[L]){const X={};L&4100&&(X.$$scope={dirty:L,ctx:A}),!s&&L&1&&(s=!0,X.width=A[0],Se(()=>s=!1)),!o&&L&2&&(o=!0,X.height=A[1],Se(()=>o=!1)),i.$set(X),L&8&&z(d,d=A[3])?(H(),k(b,1,1,M),K(),b=Ke(A),b.c(),v(b,1),b.m(l,null)):b.p(A,L)},i(A){m||(v(i.$$.fragment,A),v(b),v(g.$$.fragment,A),m=!0)},o(A){k(i.$$.fragment,A),k(b),k(g.$$.fragment,A),m=!1},d(A){A&&O(e),F(i),r(),b.d(A),F(g),h=!1,J(N)}}}function es(t,e,n){let i,s,o=0,r=0;const a=new mi(()=>n(2,o++,o),()=>n(3,r++,r)),l=new Zi(a);function d(I){i=I,n(0,i)}function u(I){s=I,n(1,s)}function g(){s=this.clientHeight,i=this.clientWidth,n(1,s),n(0,i)}return[i,s,o,r,a,l,d,u,g,I=>l.handleMousedown(I,i,s),()=>{l.handleMouseup()},()=>l.handleMouseLeave()]}class ts extends Y{constructor(e){super(),U(this,e,es,xi,z,{})}}new ts({target:document.body});
