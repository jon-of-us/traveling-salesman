var mn=Object.defineProperty;var pn=(t,e,n)=>e in t?mn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var A=(t,e,n)=>(pn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function q(){}function _n(t,e){for(const n in e)t[n]=e[n];return t}function Ge(t){return t()}function be(){return Object.create(null)}function J(t){t.forEach(Ge)}function D(t){return typeof t=="function"}function j(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function vn(t){return Object.keys(t).length===0}function Je(t,e,n,i){if(t){const s=Qe(t,e,n,i);return t[0](s)}}function Qe(t,e,n,i){return t[1]&&i?_n(n.ctx.slice(),t[1](i(e))):n.ctx}function Ze(t,e,n,i){if(t[2]&&i){const s=t[2](i(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],r=Math.max(e.dirty.length,s.length);for(let a=0;a<r;a+=1)o[a]=e.dirty[a]|s[a];return o}return e.dirty|s}return e.dirty}function Ve(t,e,n,i,s,o){if(s){const r=Qe(e,n,i,o);t.p(r,s)}}function xe(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function N(t,e){t.appendChild(e)}function M(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function V(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function E(t){return document.createElement(t)}function te(t){return document.createTextNode(t)}function U(){return te(" ")}function se(){return te("")}function m(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function le(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function yn(t){return Array.from(t.childNodes)}function fe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Se(t,e){t.value=e??""}function C(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function Le(t,e,n){for(let i=0;i<t.options.length;i+=1){const s=t.options[i];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}let ae;function wn(){if(ae===void 0){ae=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ae=!0}}return ae}function bn(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=E("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=wn();let o;return s?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=m(window,"message",r=>{r.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{o=m(i.contentWindow,"resize",e),e()}),N(t,i),()=>{(s||o&&i.contentWindow)&&o(),T(i)}}function Sn(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let ie;function ne(t){ie=t}function oe(){if(!ie)throw new Error("Function called outside component initialization");return ie}function $e(t){oe().$$.on_mount.push(t)}function et(t){oe().$$.on_destroy.push(t)}function Ln(){const t=oe();return(e,n,{cancelable:i=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=Sn(e,n,{cancelable:i});return s.slice().forEach(r=>{r.call(t,o)}),!o.defaultPrevented}return!0}}function kn(t,e){return oe().$$.context.set(t,e),e}function An(t){return oe().$$.context.get(t)}function b(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const $=[],G=[];let ee=[];const ve=[],Rn=Promise.resolve();let ye=!1;function Nn(){ye||(ye=!0,Rn.then(tt))}function ce(t){ee.push(t)}function ke(t){ve.push(t)}const _e=new Set;let x=0;function tt(){if(x!==0)return;const t=ie;do{try{for(;x<$.length;){const e=$[x];x++,ne(e),En(e.$$)}}catch(e){throw $.length=0,x=0,e}for(ne(null),$.length=0,x=0;G.length;)G.pop()();for(let e=0;e<ee.length;e+=1){const n=ee[e];_e.has(n)||(_e.add(n),n())}ee.length=0}while($.length);for(;ve.length;)ve.pop()();ye=!1,_e.clear(),ne(t)}function En(t){if(t.fragment!==null){t.update(),J(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ce)}}function In(t){const e=[],n=[];ee.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),ee=e}const ue=new Set;let Z;function H(){Z={r:0,c:[],p:Z}}function K(){Z.r||J(Z.c),Z=Z.p}function w(t,e){t&&t.i&&(ue.delete(t),t.i(e))}function L(t,e,n,i){if(t&&t.o){if(ue.has(t))return;ue.add(t),Z.c.push(()=>{ue.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function X(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ae(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function z(t){t&&t.c()}function P(t,e,n){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,n),ce(()=>{const o=t.$$.on_mount.map(Ge).filter(D);t.$$.on_destroy?t.$$.on_destroy.push(...o):J(o),t.$$.on_mount=[]}),s.forEach(ce)}function F(t,e){const n=t.$$;n.fragment!==null&&(In(n.after_update),J(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Cn(t,e){t.$$.dirty[0]===-1&&($.push(t),Nn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(t,e,n,i,s,o,r,a=[-1]){const l=ie;ne(t);const c=t.$$={fragment:null,ctx:[],props:o,update:q,not_equal:s,bound:be(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:be(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};r&&r(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(f,h,...g)=>{const k=g.length?g[0]:h;return c.ctx&&s(c.ctx[f],c.ctx[f]=k)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](k),u&&Cn(t,f)),h}):[],c.update(),u=!0,J(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const f=yn(e.target);c.fragment&&c.fragment.l(f),f.forEach(T)}else c.fragment&&c.fragment.c();e.intro&&w(t.$$.fragment),P(t,e.target,e.anchor),tt()}ne(l)}class W{constructor(){A(this,"$$");A(this,"$$set")}$destroy(){F(this,1),this.$destroy=q}$on(e,n){if(!D(n))return q;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!vn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const On="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(On);class B{constructor(e){A(this,"value");this.value=e}add(e){return e instanceof B?new B(this.value+e.value):new B(this.value+e)}subtract(e){return e instanceof B?new B(this.value-e.value):new B(this.value-e)}multiply(e){return e instanceof B?new B(this.value*e.value):new B(this.value*e)}divide(e){return e instanceof B?new B(this.value/e.value):new B(this.value/e)}px(){return`${this.value}px`}percent(){return`${this.value}%`}rem(){return`${this.value}rem`}val(){return this.value}}getComputedStyle(document.body).getPropertyValue("background-color");let nt=t=>`rgba(220, 220, 220, ${t})`,re=nt(1);const it=1,Tn=3.5,Mn=5,Dn=2,st=60,qn=new B(245),Pn=4,Re=15,he="#353535",ot=new B(20),we=new B(2),Fn="#00df16",zn=he,Ne=5,Bn=.05;function jn(t){let e,n,i,s,o=(typeof t[4]=="string"?`${t[4]}: ${t[0]}`:t[4](t[0]))+"",r,a,l;return{c(){e=E("div"),n=E("input"),i=U(),s=E("span"),r=te(o),y(n,"type","range"),y(n,"min",t[1]),y(n,"max",t[2]),y(n,"step",t[3]),n.value=t[0],y(n,"class","svelte-zgqnk3"),C(s,"--color",t[5]),y(s,"class","svelte-zgqnk3"),y(e,"class","slidercontainer svelte-zgqnk3")},m(c,u){M(c,e,u),N(e,n),N(e,i),N(e,s),N(s,r),a||(l=m(n,"input",t[6]),a=!0)},p(c,[u]){u&2&&y(n,"min",c[1]),u&4&&y(n,"max",c[2]),u&8&&y(n,"step",c[3]),u&1&&(n.value=c[0]),u&17&&o!==(o=(typeof c[4]=="string"?`${c[4]}: ${c[0]}`:c[4](c[0]))+"")&&fe(r,o)},i:q,o:q,d(c){c&&T(e),a=!1,l()}}}function Un(t,e,n){let{min:i=0}=e,{max:s=100}=e,{step:o=1}=e,{initialValue:r=1/0}=e,{value:a}=e,{onInput:l=()=>{}}=e;r!=1/0&&(a=r);let c=re,{text:u=h=>`${h}`}=e;function f(h){const g=h.target;n(0,a=parseFloat(g.value)),l(a)}return t.$$set=h=>{"min"in h&&n(1,i=h.min),"max"in h&&n(2,s=h.max),"step"in h&&n(3,o=h.step),"initialValue"in h&&n(7,r=h.initialValue),"value"in h&&n(0,a=h.value),"onInput"in h&&n(8,l=h.onInput),"text"in h&&n(4,u=h.text)},[a,i,s,o,u,c,f,r,l]}class Yn extends W{constructor(e){super(),Y(this,e,Un,jn,j,{min:1,max:2,step:3,initialValue:7,value:0,onInput:8,text:4})}}function Wn(t){let e,n,i,s;return{c(){e=E("button"),n=te(t[0]),y(e,"class","svelte-utlsjp"),C(e,"background-color",he),C(e,"margin",we.px()),C(e,"height",ot.px()),C(e,"color",re)},m(o,r){M(o,e,r),N(e,n),i||(s=m(e,"click",t[1]),i=!0)},p(o,[r]){r&1&&fe(n,o[0])},i:q,o:q,d(o){o&&T(e),i=!1,s()}}}function Xn(t,e,n){let{text:i=""}=e;function s(o){b.call(this,t,o)}return t.$$set=o=>{"text"in o&&n(0,i=o.text)},[i,s]}class rt extends W{constructor(e){super(),Y(this,e,Xn,Wn,j,{text:0})}}function Ee(t,e,n){const i=t.slice();return i[5]=e[n],i}function Ie(t){let e,n=t[5]+"",i,s,o;return{c(){e=E("option"),i=te(n),e.__value=s=t[5],Se(e,e.__value),y(e,"title",o=t[2](t[5]))},m(r,a){M(r,e,a),N(e,i)},p(r,a){a&1&&n!==(n=r[5]+"")&&fe(i,n),a&1&&s!==(s=r[5])&&(e.__value=s,Se(e,e.__value)),a&5&&o!==(o=r[2](r[5]))&&y(e,"title",o)},d(r){r&&T(e)}}}function Hn(t){let e,n,i,s=X(t[0]),o=[];for(let r=0;r<s.length;r+=1)o[r]=Ie(Ee(t,s,r));return{c(){e=E("select");for(let r=0;r<o.length;r+=1)o[r].c();y(e,"id","options"),y(e,"class","svelte-oxggog"),C(e,"background-color",he),C(e,"margin",we.px()),C(e,"height",ot.px()),C(e,"color",re)},m(r,a){M(r,e,a);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(e,null);Le(e,t[1]),n||(i=m(e,"change",t[3]),n=!0)},p(r,[a]){if(a&5){s=X(r[0]);let l;for(l=0;l<s.length;l+=1){const c=Ee(r,s,l);o[l]?o[l].p(c,a):(o[l]=Ie(c),o[l].c(),o[l].m(e,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}a&3&&Le(e,r[1])},i:q,o:q,d(r){r&&T(e),V(o,r),n=!1,i()}}}function Kn(t,e,n){let{algoOptions:i}=e,{selectedOption:s}=e,{algoDescription:o}=e,{onChange:r}=e;function a(l){const c=l.target;r(c.value)}return t.$$set=l=>{"algoOptions"in l&&n(0,i=l.algoOptions),"selectedOption"in l&&n(1,s=l.selectedOption),"algoDescription"in l&&n(2,o=l.algoDescription),"onChange"in l&&n(4,r=l.onChange)},[i,s,o,a,r]}class lt extends W{constructor(e){super(),Y(this,e,Kn,Hn,j,{algoOptions:0,selectedOption:1,algoDescription:2,onChange:4})}}function Ce(t){return t*2654435761%2**32}function*Gn(t){let e=[...t.nodes.all()].sort((n,i)=>Ce(n)-Ce(i));t.edges.clear();for(let n=0;n<e.length;n++)t.edges.add([e[n],e[(n+1)%e.length]]),yield}let at=class{constructor(){A(this,"nextIdx",0);A(this,"nodes",new Map)}add(e,n){if([e,n].some(i=>i<0||i>1))throw new Error("x and y should be between 0 and 1");this.nodes.set(this.nextIdx,[e,n]),this.nextIdx++}setCoords(e,n){if(!this.nodes.has(e))throw new Error(`node ${e} not found`);this.nodes.set(e,n)}getCoords(e){let n=this.nodes.get(e);if(n===void 0)throw new Error(`node ${e} not found`);return n}findNearNode(e,n){for(let[i,s]of this.nodes)if((s[0]-e[0])**2+(s[1]-e[1])**2<n**2)return i}delete(e){this.nodes.delete(e)}count(){return this.nodes.size}all(){return this.nodes.keys()}},ut=class{constructor(e){A(this,"edges",new Set);e!=null&&(this.edges=structuredClone(e.edges))}associateNumber(e){let n=[...e].sort((i,s)=>i-s).reverse();return n[0]*(n[0]+1)/2+n[1]}disassociateNumber(e){let n=Math.floor((Math.sqrt(8*e+1)-1)/2),i=e-n*(n+1)/2;return[n,i]}add(e){if(e[0]===e[1])throw new Error("self loop not allowed");this.edges.add(this.associateNumber(e))}delete(e){return this.edges.delete(this.associateNumber(e))}has(e){return this.edges.has(this.associateNumber(e))}count(){return this.edges.size}*all(){for(let e of this.edges)yield this.disassociateNumber(e)}clear(){this.edges.clear()}};class ct{constructor(e=new at,n=new ut){this.nodes=e,this.edges=n}edgeLength(e){const[n,i]=this.nodes.getCoords(e[0]),[s,o]=this.nodes.getCoords(e[1]);return Math.sqrt((n-s)**2+(i-o)**2)}totalLength(){let e=0;for(let n of this.edges.all())e+=this.edgeLength(n);return e}neighborMap(){var n,i;let e=new Map;for(let[s,o]of this.edges.all())e.has(s)||e.set(s,new Set),e.has(o)||e.set(o,new Set),(n=e.get(s))==null||n.add(o),(i=e.get(o))==null||i.add(s);return e}neighbors(e){let n=new Set;for(let[i,s]of this.edges.all())i===e&&n.add(s),s===e&&n.add(i);return n}isClosedLoop(){if(this.edges.count()<3)return!1;let e=this.neighborMap(),n=e.keys().next().value,i=-1,s=n,o=0;do{let r=[...e.get(s).values()];if(r.length!==2)return!1;r=r.filter(a=>a!==i),i=s,s=r[0],o++}while(s!==n&&o<=this.edges.count()+1);return o===this.edges.count()}}function*Jn(t){for(;Qn(t);)yield}function Qn(t){let e=[...t.edges.all()];for(;e.length>=2;){let n=e.pop();for(let i of e){let[s,o,r]=Zn(n,i,t);if(s)return t.edges.delete(n),t.edges.delete(i),t.edges.add(o),t.edges.add(r),!0}}return!1}function Zn(t,e,n){function i(c,u){if(n.edgeLength(c)+n.edgeLength(u)>=s)return!1;let f=new ct;for(let h of n.edges.all())f.edges.add(h);return f.edges.delete(t),f.edges.delete(e),f.edges.add(c),f.edges.add(u),f.isClosedLoop()}const s=n.edgeLength(t)+n.edgeLength(e),[o,r]=t,[a,l]=e;return o==a||o==l||r==a||r==l?[!1,t,e]:i([o,a],[r,l])?[!0,[o,a],[r,l]]:i([o,l],[r,a])?[!0,[o,l],[r,a]]:[!1,t,e]}function Vn(t,e){const{bestEdgeToInsert:n}=dt(t,e);e.edges.delete(n),e.edges.add([t,n[0]]),e.edges.add([t,n[1]])}function dt(t,e){let n=1/0,i;for(let s of e.edges.all()){const o=e.edgeLength([t,s[0]])+e.edgeLength([t,s[1]])-e.edgeLength(s);o<n&&(n=o,i=s)}return i=i,{bestEdgeToInsert:i,minLeng:n}}function*xn(t){const e=[...t.nodes.all()];for(let n=0;n<e.length;n++){const i=e[n];$n(i,t)&&(n=-1,yield)}}function $n(t,e){const n=e.totalLength(),i=[...e.neighbors(t)];e.edges.delete([t,i[0]]),e.edges.delete([t,i[1]]);const s=[i[0],i[1]];return e.edges.add(s),Vn(t,e),n-e.totalLength()>1e-4}function*ei(t){t.edges.clear();let e=[...t.nodes.all()],[n,i,s]=e.splice(e.length-3,3);for(t.edges.add([n,i]),t.edges.add([i,s]),t.edges.add([n,s]),yield;e.length>0;){let o,r,a=1/0;for(let l of e){let{bestEdgeToInsert:c,minLeng:u}=dt(l,t);u<a&&(a=u,o=l,r=c)}r=r,o=o,e.splice(e.indexOf(o),1),t.edges.delete(r),t.edges.add([o,r[0]]),t.edges.add([o,r[1]]),yield}}class ti{constructor(e){A(this,"timesUsed",0);this.partition=e}getPartition(){switch(typeof this.partition){case"number":return this.partition;case"object":return this.partition.getPartition()}}setPartition(e){typeof this.partition=="object"&&this.partition.setPartition(e),this.partition=e}incrementTimesUsed(){this.timesUsed++}isUsedUp(){return this.timesUsed>=2}}function*ni(t){t.edges.clear();let e=[],n=[...t.nodes.all()];for(let o=0;o<n.length-1;o++)for(let r=o+1;r<n.length;r++){let a=[n[o],n[r]];e.push([a,t.edgeLength(a)])}e.sort((o,r)=>o[1]-r[1]);let i=new Map(n.map((o,r)=>[o,new ti(r)]));for(let[o,r]of e){if(t.edges.count()==t.nodes.count()-1)break;let a=i.get(o[0]),l=i.get(o[1]);a.isUsedUp()||l.isUsedUp()||a.getPartition()==l.getPartition()||(t.edges.add(o),a.incrementTimesUsed(),l.incrementTimesUsed(),a.setPartition(l),yield)}let s=n.filter(o=>!i.get(o).isUsedUp());t.edges.add(s),yield}const ft=["Random","Shortest edge","Cheapest insertion"],de=["Next neighbor","2-Opt"];function ht(t){switch(t){case"Random":return"Randomly chosen edges, which form a cycle";case"2-Opt":return"Select two edges and swap them if it improves the total distance (often this removes a crossing)";case"Next neighbor":return"Select the closest neighbor to the current node";case"Cheapest insertion":return"Start with a random Triangle. Insert the closest node to the current cycle";case"Shortest edge":return"Start without any edges. Select the shortest edge and add it to the graph, if it is still possible to form a cycle after that. Repeat until all nodes are connected"}}function ii(t){switch(t){case"Random":return Gn;case"2-Opt":return Jn;case"Next neighbor":return xn;case"Cheapest insertion":return ei;case"Shortest edge":return ni}}function*si(t,e){yield*ii(e)(t)}function oi(t){let e,n,i,s,o=(t[0].len+1e-4).toString().slice(0,4)+"",r,a,l;return{c(){e=E("div"),n=E("div"),i=U(),s=E("sub"),r=te(o),a=U(),l=E("button"),y(n,"id","placeholder"),y(n,"class","svelte-1e3tgy7"),y(s,"class","svelte-1e3tgy7"),C(s,"color",t[3]),y(l,"class","svelte-1e3tgy7"),C(l,"background-color",t[3]),C(l,"width",t[2]),y(e,"id","container"),y(e,"title","length at this step"),y(e,"class","svelte-1e3tgy7"),C(e,"margin",we.px())},m(c,u){M(c,e,u),N(e,n),N(e,i),N(e,s),N(s,r),N(e,a),N(e,l),t[6](l)},p(c,[u]){u&1&&o!==(o=(c[0].len+1e-4).toString().slice(0,4)+"")&&fe(r,o),u&8&&C(s,"color",c[3]),u&8&&C(l,"background-color",c[3]),u&4&&C(l,"width",c[2])},i:q,o:q,d(c){c&&T(e),t[6](null)}}}function ri(t,e,n){let i,s,{step:o}=e,{maxLeng:r}=e,{renderedStep:a}=e,l;function c(u){G[u?"unshift":"push"](()=>{l=u,n(1,l)})}return t.$$set=u=>{"step"in u&&n(0,o=u.step),"maxLeng"in u&&n(4,r=u.maxLeng),"renderedStep"in u&&n(5,a=u.renderedStep)},t.$$.update=()=>{t.$$.dirty&33&&n(3,i=o.index==a?Fn:zn),t.$$.dirty&17&&n(2,s=`${o.len/r*100}%`),t.$$.dirty&35&&o.index==a&&(l==null||l.scrollIntoView({behavior:"instant",block:"center"}))},[o,l,s,i,r,a,c]}class gt extends W{constructor(e){super(),Y(this,e,ri,oi,j,{step:0,maxLeng:4,renderedStep:5})}}function Oe(t,e,n){const i=t.slice();return i[8]=e[n],i[10]=n,i}function Te(t,e,n){const i=t.slice();return i[11]=e[n],i}function Me(t,e,n){const i=t.slice();return i[11]=e[n],i}function De(t){let e,n;return e=new gt({props:{step:t[11],maxLeng:t[1].maxLeng,renderedStep:t[3]}}),{c(){z(e.$$.fragment)},m(i,s){P(e,i,s),n=!0},p(i,s){const o={};s&2&&(o.step=i[11]),s&2&&(o.maxLeng=i[1].maxLeng),s&8&&(o.renderedStep=i[3]),e.$set(o)},i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function qe(t){let e,n;return e=new gt({props:{step:t[11],maxLeng:t[1].maxLeng,renderedStep:t[3]}}),{c(){z(e.$$.fragment)},m(i,s){P(e,i,s),n=!0},p(i,s){const o={};s&2&&(o.step=i[11]),s&2&&(o.maxLeng=i[1].maxLeng),s&8&&(o.renderedStep=i[3]),e.$set(o)},i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function Pe(t){let e,n,i,s,o;function r(...u){return t[5](t[10],...u)}n=new lt({props:{algoOptions:[...de],selectedOption:t[8],algoDescription:ht,onChange:r}});let a=X(t[1].steps[t[10]+1]),l=[];for(let u=0;u<a.length;u+=1)l[u]=qe(Te(t,a,u));const c=u=>L(l[u],1,1,()=>{l[u]=null});return{c(){e=E("div"),z(n.$$.fragment),i=U();for(let u=0;u<l.length;u+=1)l[u].c();s=se(),y(e,"title","optimization Algorithm")},m(u,f){M(u,e,f),P(n,e,null),M(u,i,f);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(u,f);M(u,s,f),o=!0},p(u,f){t=u;const h={};if(f&1&&(h.selectedOption=t[8]),f&4&&(h.onChange=r),n.$set(h),f&10){a=X(t[1].steps[t[10]+1]);let g;for(g=0;g<a.length;g+=1){const k=Te(t,a,g);l[g]?(l[g].p(k,f),w(l[g],1)):(l[g]=qe(k),l[g].c(),w(l[g],1),l[g].m(s.parentNode,s))}for(H(),g=a.length;g<l.length;g+=1)c(g);K()}},i(u){if(!o){w(n.$$.fragment,u);for(let f=0;f<a.length;f+=1)w(l[f]);o=!0}},o(u){L(n.$$.fragment,u),l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)L(l[f]);o=!1},d(u){u&&(T(e),T(i),T(s)),F(n),V(l,u)}}}function Fe(t){let e,n;return e=new rt({props:{text:"add algorithm"}}),e.$on("click",t[6]),{c(){z(e.$$.fragment)},m(i,s){P(e,i,s),n=!0},p:q,i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function ze(t){let e,n;return e=new rt({props:{text:"remove algorithm"}}),e.$on("click",t[7]),{c(){z(e.$$.fragment)},m(i,s){P(e,i,s),n=!0},p:q,i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function li(t){let e,n,i,s,o,r,a,l;i=new lt({props:{algoOptions:[...ft],selectedOption:t[0].initAlgo,algoDescription:ht,onChange:t[4]}});let c=X(t[1].steps[0]),u=[];for(let v=0;v<c.length;v+=1)u[v]=De(Me(t,c,v));const f=v=>L(u[v],1,1,()=>{u[v]=null});let h=X(t[0].optimAlgoStack),g=[];for(let v=0;v<h.length;v+=1)g[v]=Pe(Oe(t,h,v));const k=v=>L(g[v],1,1,()=>{g[v]=null});let R=t[0].optimAlgoStack.length+1<=Ne&&Fe(t),S=t[0].optimAlgoStack.length>0&&ze(t);return{c(){e=E("div"),n=E("div"),z(i.$$.fragment),s=U();for(let v=0;v<u.length;v+=1)u[v].c();o=U();for(let v=0;v<g.length;v+=1)g[v].c();r=U(),R&&R.c(),a=U(),S&&S.c(),y(n,"title","initialization Algorithm"),y(e,"class","container svelte-risjyu")},m(v,_){M(v,e,_),N(e,n),P(i,n,null),N(e,s);for(let O=0;O<u.length;O+=1)u[O]&&u[O].m(e,null);N(e,o);for(let O=0;O<g.length;O+=1)g[O]&&g[O].m(e,null);N(e,r),R&&R.m(e,null),N(e,a),S&&S.m(e,null),l=!0},p(v,[_]){const O={};if(_&1&&(O.selectedOption=v[0].initAlgo),_&4&&(O.onChange=v[4]),i.$set(O),_&10){c=X(v[1].steps[0]);let p;for(p=0;p<c.length;p+=1){const I=Me(v,c,p);u[p]?(u[p].p(I,_),w(u[p],1)):(u[p]=De(I),u[p].c(),w(u[p],1),u[p].m(e,o))}for(H(),p=c.length;p<u.length;p+=1)f(p);K()}if(_&15){h=X(v[0].optimAlgoStack);let p;for(p=0;p<h.length;p+=1){const I=Oe(v,h,p);g[p]?(g[p].p(I,_),w(g[p],1)):(g[p]=Pe(I),g[p].c(),w(g[p],1),g[p].m(e,r))}for(H(),p=h.length;p<g.length;p+=1)k(p);K()}v[0].optimAlgoStack.length+1<=Ne?R?(R.p(v,_),_&1&&w(R,1)):(R=Fe(v),R.c(),w(R,1),R.m(e,a)):R&&(H(),L(R,1,1,()=>{R=null}),K()),v[0].optimAlgoStack.length>0?S?(S.p(v,_),_&1&&w(S,1)):(S=ze(v),S.c(),w(S,1),S.m(e,null)):S&&(H(),L(S,1,1,()=>{S=null}),K())},i(v){if(!l){w(i.$$.fragment,v);for(let _=0;_<c.length;_+=1)w(u[_]);for(let _=0;_<h.length;_+=1)w(g[_]);w(R),w(S),l=!0}},o(v){L(i.$$.fragment,v),u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)L(u[_]);g=g.filter(Boolean);for(let _=0;_<g.length;_+=1)L(g[_]);L(R),L(S),l=!1},d(v){v&&T(e),F(i),V(u,v),V(g,v),R&&R.d(),S&&S.d()}}}function ai(t,e,n){let{selectedAlgos:i}=e,{memory:s}=e,{actions:o}=e,{renderedStep:r}=e;const a=f=>o.changeInitAlgo(f),l=(f,h)=>o.changeOptimAlgo(h,f),c=()=>o.addOptimAlgo(),u=()=>o.removeOptimAlgo();return t.$$set=f=>{"selectedAlgos"in f&&n(0,i=f.selectedAlgos),"memory"in f&&n(1,s=f.memory),"actions"in f&&n(2,o=f.actions),"renderedStep"in f&&n(3,r=f.renderedStep)},[i,s,o,r,a,l,c,u]}class ui extends W{constructor(e){super(),Y(this,e,ai,li,j,{selectedAlgos:0,memory:1,actions:2,renderedStep:3})}}class ci{constructor(){A(this,"initAlgo",ft[1]);A(this,"optimAlgoStack",[de[0],de[1]])}all(){return[this.initAlgo,...this.optimAlgoStack]}}function di(t){let e,n,i,s,o,r,a;return i=new ui({props:{memory:t[0],selectedAlgos:t[2],actions:t[1],renderedStep:t[3]}}),r=new Yn({props:{text:"Number of Points",value:t[0].nodes.count(),min:Pn,max:st,onInput:t[5]}}),{c(){e=E("div"),n=E("div"),z(i.$$.fragment),s=U(),o=E("div"),z(r.$$.fragment),y(n,"class","stack svelte-1ggf4bk"),y(o,"class","slider svelte-1ggf4bk"),y(e,"class","container svelte-1ggf4bk"),C(e,"width",qn.px())},m(l,c){M(l,e,c),N(e,n),P(i,n,null),N(e,s),N(e,o),P(r,o,null),t[6](e),a=!0},p(l,[c]){const u={};c&1&&(u.memory=l[0]),c&4&&(u.selectedAlgos=l[2]),c&2&&(u.actions=l[1]),c&8&&(u.renderedStep=l[3]),i.$set(u);const f={};c&1&&(f.value=l[0].nodes.count()),c&2&&(f.onInput=l[5]),r.$set(f)},i(l){a||(w(i.$$.fragment,l),w(r.$$.fragment,l),a=!0)},o(l){L(i.$$.fragment,l),L(r.$$.fragment,l),a=!1},d(l){l&&T(e),F(i),F(r),t[6](null)}}}function fi(t,e,n){let{memory:i}=e,{actions:s}=e,{selectedAlgos:o}=e,{renderedStep:r}=e,a=.999,l;function c(h){Math.abs(h.deltaY)<.2||(a+=h.deltaY/i.nSteps*Bn,a=Math.max(a,0),a=Math.min(a,.9999),s.setVirtualScroll(a))}$e(()=>{l.addEventListener("wheel",c)});const u=h=>s.adjustNumberOfNodes(h);function f(h){G[h?"unshift":"push"](()=>{l=h,n(4,l)})}return t.$$set=h=>{"memory"in h&&n(0,i=h.memory),"actions"in h&&n(1,s=h.actions),"selectedAlgos"in h&&n(2,o=h.selectedAlgos),"renderedStep"in h&&n(3,r=h.renderedStep)},[i,s,o,r,l,u,f]}class hi extends W{constructor(e){super(),Y(this,e,fi,di,j,{memory:0,actions:1,selectedAlgos:2,renderedStep:3})}}class gi{constructor(){A(this,"currentLayerId");A(this,"setups");A(this,"renderers");A(this,"dispatchers");A(this,"needsSetup");A(this,"needsRedraw");A(this,"context");A(this,"width");A(this,"height");A(this,"autoclear");A(this,"pixelRatio");A(this,"renderLoop");A(this,"layerObserver");A(this,"layerRef");A(this,"layerSequence");A(this,"renderingLayerId");A(this,"activeLayerId");A(this,"activeLayerDispatcher");this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.getRenderingLayerId=this.getRenderingLayerId.bind(this),this.currentLayerId=1,this.setups=new Map,this.renderers=new Map,this.dispatchers=new Map,this.needsSetup=!1,this.needsRedraw=!0,this.renderingLayerId=0,this.activeLayerId=0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}register({setup:e,render:n,dispatcher:i}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,n),this.dispatchers.set(this.currentLayerId,i),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.dispatchers.delete(e),this.needsRedraw=!0}setup(e,n){this.context=e,this.layerRef=n,this.observeLayerSequence(),this.startRenderLoop()}observeLayerSequence(){this.layerObserver=new MutationObserver(this.getLayerSequence.bind(this)),this.layerObserver.observe(this.layerRef,{childList:!0}),this.getLayerSequence()}getLayerSequence(){const e=[...this.layerRef.children];this.layerSequence=e.map(n=>+(n.dataset.layerId??-1)),this.redraw()}startRenderLoop(){this.render(),this.renderLoop=requestAnimationFrame(()=>this.startRenderLoop())}render(){var o;const e=this.context,n=this.width,i=this.height,s=this.pixelRatio;if(this.needsSetup){for(const[r,a]of this.setups)a({context:e,width:n,height:i}),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e.setTransform(s,0,0,s,0,0),this.autoclear&&e.clearRect(0,0,n,i);for(const r of this.layerSequence)this.renderingLayerId=r,(o=this.renderers.get(r))==null||o({context:e,width:n,height:i});this.needsRedraw=!1}}setActiveLayer(e,n){this.activeLayerId!==e&&(n instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerleave",n)),this.dispatchLayerEvent(new MouseEvent("mouseleave",n))),this.activeLayerId=e,this.activeLayerDispatcher=this.dispatchers.get(e),n instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerenter",n)),this.dispatchLayerEvent(new MouseEvent("mouseenter",n))))}dispatchLayerEvent(e){if(this.activeLayerDispatcher){if(window.TouchEvent&&e instanceof TouchEvent){const{left:n,top:i}=e.target.getBoundingClientRect(),{clientX:s,clientY:o}=e.changedTouches[0],r={x:s-n,y:o-i,originalEvent:e};this.activeLayerDispatcher(e.type,r)}else if(e instanceof MouseEvent){const n={x:e.offsetX,y:e.offsetY,originalEvent:e};this.activeLayerDispatcher(e.type,n)}}}getRenderingLayerId(){return this.renderingLayerId}destroy(){typeof window>"u"||(this.layerObserver.disconnect(),cancelAnimationFrame(this.renderLoop))}}const mi=t=>{const e=t*2,n=e>>16&255,i=e>>8&255,s=e&255;return`rgb(${n}, ${i}, ${s})`},pi=(t,e,n)=>{const i=(t<<16|e<<8|n)/2;return i%1?0:i},_i=["drawImage"],vi=["filter","shadowBlur","globalCompositeOperation","globalAlpha"],yi=["drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],wi=t=>{let e;const n=document.createElement("canvas"),i=n.getContext("2d",{willReadFrequently:!0}),s=()=>{n.width=t.canvas.width,n.height=t.canvas.height};return new MutationObserver(s).observe(t.canvas,{attributeFilter:["width","height"]}),s(),new Proxy(t,{get(r,a){if(a==="_getLayerIdAtPixel")return(c,u)=>{const[f,h,g]=i.getImageData(c,u,1,1).data;return pi(f,h,g)};const l=r[a];return typeof l!="function"?l:function(...c){if(yi.includes(a)){const u=mi(e());i.fillStyle=u,i.strokeStyle=u}if(a==="drawImage"){const u=c.slice(1);i.fillRect(...u)}return _i.includes(a)||Reflect.apply(l,i,c),Reflect.apply(l,r,c)}},set(r,a,l){return a==="_renderingLayerId"?(e=l,!0):(r[a]=l,vi.includes(a)||(i[a]=l),!0)}})};function bi(t){let e,n,i,s=`${t[0]}px`,o=`${t[1]}px`,r,a,l,c,u;const f=t[18].default,h=Je(f,t,t[17],null);return{c(){e=E("canvas"),r=U(),a=E("div"),h&&h.c(),y(e,"width",n=t[0]*t[5]),y(e,"height",i=t[1]*t[5]),y(e,"class",t[4]),y(e,"style",t[2]),C(e,"display","block"),C(e,"width",s),C(e,"height",o),C(a,"display","none")},m(g,k){M(g,e,k),t[64](e),M(g,r,k),M(g,a,k),h&&h.m(a,null),t[65](a),l=!0,c||(u=[m(e,"touchstart",le(function(){D(t[3]?t[9]:null)&&(t[3]?t[9]:null).apply(this,arguments)})),m(e,"mousemove",function(){D(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),m(e,"pointermove",function(){D(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),m(e,"click",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"contextmenu",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"dblclick",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"mousedown",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"mouseenter",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"mouseleave",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"mouseup",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"wheel",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"touchcancel",le(function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),m(e,"touchend",le(function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),m(e,"touchmove",le(function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),m(e,"pointerenter",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"pointerleave",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"pointerdown",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"pointerup",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"pointercancel",function(){D(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),m(e,"focus",t[19]),m(e,"blur",t[20]),m(e,"fullscreenchange",t[21]),m(e,"fullscreenerror",t[22]),m(e,"scroll",t[23]),m(e,"cut",t[24]),m(e,"copy",t[25]),m(e,"paste",t[26]),m(e,"keydown",t[27]),m(e,"keypress",t[28]),m(e,"keyup",t[29]),m(e,"auxclick",t[30]),m(e,"click",t[31]),m(e,"contextmenu",t[32]),m(e,"dblclick",t[33]),m(e,"mousedown",t[34]),m(e,"mouseenter",t[35]),m(e,"mouseleave",t[36]),m(e,"mousemove",t[37]),m(e,"mouseover",t[38]),m(e,"mouseout",t[39]),m(e,"mouseup",t[40]),m(e,"select",t[41]),m(e,"wheel",t[42]),m(e,"drag",t[43]),m(e,"dragend",t[44]),m(e,"dragenter",t[45]),m(e,"dragstart",t[46]),m(e,"dragleave",t[47]),m(e,"dragover",t[48]),m(e,"drop",t[49]),m(e,"touchcancel",t[50]),m(e,"touchend",t[51]),m(e,"touchmove",t[52]),m(e,"touchstart",t[53]),m(e,"pointerover",t[54]),m(e,"pointerenter",t[55]),m(e,"pointerdown",t[56]),m(e,"pointermove",t[57]),m(e,"pointerup",t[58]),m(e,"pointercancel",t[59]),m(e,"pointerout",t[60]),m(e,"pointerleave",t[61]),m(e,"gotpointercapture",t[62]),m(e,"lostpointercapture",t[63])],c=!0)},p(g,k){t=g,(!l||k[0]&33&&n!==(n=t[0]*t[5]))&&y(e,"width",n),(!l||k[0]&34&&i!==(i=t[1]*t[5]))&&y(e,"height",i),(!l||k[0]&16)&&y(e,"class",t[4]),(!l||k[0]&4)&&y(e,"style",t[2]);const R=k[0]&4;R&&C(e,"display","block"),(R||k[0]&5&&s!==(s=`${t[0]}px`))&&C(e,"width",s),(R||k[0]&6&&o!==(o=`${t[1]}px`))&&C(e,"height",o),h&&h.p&&(!l||k[0]&131072)&&Ve(h,f,t,t[17],l?Ze(f,t[17],k,null):xe(t[17]),null)},i(g){l||(w(h,g),l=!0)},o(g){L(h,g),l=!1},d(g){g&&(T(e),T(r),T(a)),t[64](null),h&&h.d(g),t[65](null),c=!1,J(u)}}}const mt=Symbol(),Si=()=>An(mt);function Li(t,e,n){let i,{$$slots:s={},$$scope:o}=e,{width:r=640,height:a=640,pixelRatio:l=null,style:c="",autoclear:u=!0,layerEvents:f=!1}=e,{class:h=""}=e,g,k=null,R;const S=new gi;function v(){S.redraw()}function _(){return g}function O(){return k}l==null&&(typeof window<"u"?l=window.devicePixelRatio:l=2),kn(mt,{register:S.register,unregister:S.unregister,redraw:S.redraw}),$e(()=>{const d=g.getContext("2d");f?(k=wi(d),k._renderingLayerId=S.getRenderingLayerId):k=d,S.setup(k,R)}),et(()=>S.destroy());const p=d=>{const ge=d.offsetX*i,me=d.offsetY*i,pe=k._getLayerIdAtPixel(ge,me);S.setActiveLayer(pe,d),S.dispatchLayerEvent(d)},I=d=>{const{clientX:ge,clientY:me}=d.changedTouches[0],{left:pe,top:dn}=g.getBoundingClientRect(),fn=(ge-pe)*i,hn=(me-dn)*i,gn=k._getLayerIdAtPixel(fn,hn);S.setActiveLayer(gn,d),S.dispatchLayerEvent(d)},Q=d=>{window.TouchEvent&&d instanceof TouchEvent&&d.preventDefault(),S.dispatchLayerEvent(d)};function _t(d){b.call(this,t,d)}function vt(d){b.call(this,t,d)}function yt(d){b.call(this,t,d)}function wt(d){b.call(this,t,d)}function bt(d){b.call(this,t,d)}function St(d){b.call(this,t,d)}function Lt(d){b.call(this,t,d)}function kt(d){b.call(this,t,d)}function At(d){b.call(this,t,d)}function Rt(d){b.call(this,t,d)}function Nt(d){b.call(this,t,d)}function Et(d){b.call(this,t,d)}function It(d){b.call(this,t,d)}function Ct(d){b.call(this,t,d)}function Ot(d){b.call(this,t,d)}function Tt(d){b.call(this,t,d)}function Mt(d){b.call(this,t,d)}function Dt(d){b.call(this,t,d)}function qt(d){b.call(this,t,d)}function Pt(d){b.call(this,t,d)}function Ft(d){b.call(this,t,d)}function zt(d){b.call(this,t,d)}function Bt(d){b.call(this,t,d)}function jt(d){b.call(this,t,d)}function Ut(d){b.call(this,t,d)}function Yt(d){b.call(this,t,d)}function Wt(d){b.call(this,t,d)}function Xt(d){b.call(this,t,d)}function Ht(d){b.call(this,t,d)}function Kt(d){b.call(this,t,d)}function Gt(d){b.call(this,t,d)}function Jt(d){b.call(this,t,d)}function Qt(d){b.call(this,t,d)}function Zt(d){b.call(this,t,d)}function Vt(d){b.call(this,t,d)}function xt(d){b.call(this,t,d)}function $t(d){b.call(this,t,d)}function en(d){b.call(this,t,d)}function tn(d){b.call(this,t,d)}function nn(d){b.call(this,t,d)}function sn(d){b.call(this,t,d)}function on(d){b.call(this,t,d)}function rn(d){b.call(this,t,d)}function ln(d){b.call(this,t,d)}function an(d){b.call(this,t,d)}function un(d){G[d?"unshift":"push"](()=>{g=d,n(6,g)})}function cn(d){G[d?"unshift":"push"](()=>{R=d,n(7,R)})}return t.$$set=d=>{"width"in d&&n(0,r=d.width),"height"in d&&n(1,a=d.height),"pixelRatio"in d&&n(11,l=d.pixelRatio),"style"in d&&n(2,c=d.style),"autoclear"in d&&n(12,u=d.autoclear),"layerEvents"in d&&n(3,f=d.layerEvents),"class"in d&&n(4,h=d.class),"$$scope"in d&&n(17,o=d.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2048&&n(5,i=l??1),t.$$.dirty[0]&1&&n(16,S.width=r,S),t.$$.dirty[0]&2&&n(16,S.height=a,S),t.$$.dirty[0]&32&&n(16,S.pixelRatio=i,S),t.$$.dirty[0]&4096&&n(16,S.autoclear=u,S),t.$$.dirty[0]&71683&&S.redraw()},[r,a,c,f,h,i,g,R,p,I,Q,l,u,v,_,O,S,o,s,_t,vt,yt,wt,bt,St,Lt,kt,At,Rt,Nt,Et,It,Ct,Ot,Tt,Mt,Dt,qt,Pt,Ft,zt,Bt,jt,Ut,Yt,Wt,Xt,Ht,Kt,Gt,Jt,Qt,Zt,Vt,xt,$t,en,tn,nn,sn,on,rn,ln,an,un,cn]}class ki extends W{constructor(e){super(),Y(this,e,Li,bi,j,{width:0,height:1,pixelRatio:11,style:2,autoclear:12,layerEvents:3,class:4,redraw:13,getCanvas:14,getContext:15},null,[-1,-1,-1])}get redraw(){return this.$$.ctx[13]}get getCanvas(){return this.$$.ctx[14]}get getContext(){return this.$$.ctx[15]}}function Ai(t){let e;return{c(){e=E("div"),y(e,"data-layer-id",t[0])},m(n,i){M(n,e,i)},p:q,i:q,o:q,d(n){n&&T(e)}}}function Ri(t,e,n){const{register:i,unregister:s,redraw:o}=Si(),r=Ln();let{setup:a=void 0}=e,{render:l=()=>{}}=e;const c=i({setup:a,render:l,dispatcher:r});return et(()=>s(c)),t.$$set=u=>{"setup"in u&&n(1,a=u.setup),"render"in u&&n(2,l=u.render)},t.$$.update=()=>{t.$$.dirty&4&&o()},[c,a,l]}class pt extends W{constructor(e){super(),Y(this,e,Ri,Ai,j,{setup:1,render:2})}}function Ni(t){let e;const n=t[2].default,i=Je(n,t,t[3],null);return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),e=!0},p(s,o){i&&i.p&&(!e||o&8)&&Ve(i,n,s,s[3],e?Ze(n,s[3],o,null):xe(s[3]),null)},i(s){e||(w(i,s),e=!0)},o(s){L(i,s),e=!1},d(s){i&&i.d(s)}}}function Ei(t){let e,n,i;return n=new ki({props:{width:t[0],height:t[1],$$slots:{default:[Ni]},$$scope:{ctx:t}}}),{c(){e=E("div"),z(n.$$.fragment),y(e,"class","svelte-1katzbq")},m(s,o){M(s,e,o),P(n,e,null),i=!0},p(s,[o]){const r={};o&1&&(r.width=s[0]),o&2&&(r.height=s[1]),o&8&&(r.$$scope={dirty:o,ctx:s}),n.$set(r)},i(s){i||(w(n.$$.fragment,s),i=!0)},o(s){L(n.$$.fragment,s),i=!1},d(s){s&&T(e),F(n)}}}function Ii(t,e,n){let{$$slots:i={},$$scope:s}=e,{width:o=0}=e,{height:r=0}=e;return t.$$set=a=>{"width"in a&&n(0,o=a.width),"height"in a&&n(1,r=a.height),"$$scope"in a&&n(3,s=a.$$scope)},[o,r,i,s]}class Ci extends W{constructor(e){super(),Y(this,e,Ii,Ei,j,{width:0,height:1})}}function Oi(t){let e,n;return e=new pt({props:{render:t[0]}}),{c(){z(e.$$.fragment)},m(i,s){P(e,i,s),n=!0},p:q,i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function Ti(t,e,n){let i,s,{coords:o}=e;const r=({context:a,width:l,height:c})=>{a.fillStyle="white",a.beginPath(),a.arc(i*l,s*c,Mn,0,2*Math.PI),a.fill()};return t.$$set=a=>{"coords"in a&&n(1,o=a.coords)},t.$$.update=()=>{t.$$.dirty&2&&([i,s]=o)},[r,o]}class Mi extends W{constructor(e){super(),Y(this,e,Ti,Oi,j,{coords:1})}}function Be(t,e,n){const i=t.slice();return i[1]=e[n],i}function je(t){let e,n;return e=new Mi({props:{coords:t[0].nodes.getCoords(t[1])}}),{c(){z(e.$$.fragment)},m(i,s){P(e,i,s),n=!0},p(i,s){const o={};s&1&&(o.coords=i[0].nodes.getCoords(i[1])),e.$set(o)},i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function Di(t){let e,n,i=X(t[0].nodes.all()),s=[];for(let r=0;r<i.length;r+=1)s[r]=je(Be(t,i,r));const o=r=>L(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=se()},m(r,a){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(r,a);M(r,e,a),n=!0},p(r,[a]){if(a&1){i=X(r[0].nodes.all());let l;for(l=0;l<i.length;l+=1){const c=Be(r,i,l);s[l]?(s[l].p(c,a),w(s[l],1)):(s[l]=je(c),s[l].c(),w(s[l],1),s[l].m(e.parentNode,e))}for(H(),l=i.length;l<s.length;l+=1)o(l);K()}},i(r){if(!n){for(let a=0;a<i.length;a+=1)w(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)L(s[a]);n=!1},d(r){r&&T(e),V(s,r)}}}function qi(t,e,n){let{memory:i}=e;return t.$$set=s=>{"memory"in s&&n(0,i=s.memory)},[i]}class Pi extends W{constructor(e){super(),Y(this,e,qi,Di,j,{memory:0})}}function Fi(t){let e,n;return e=new pt({props:{render:t[0]}}),{c(){z(e.$$.fragment)},m(i,s){P(e,i,s),n=!0},p:q,i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function zi(t,e,n){let i,s,o,r,{coords:a}=e,{opacity:l=1}=e;const c=({context:u,width:f,height:h})=>{u.beginPath(),u.moveTo(i*f,s*h),u.lineTo(o*f,r*h),u.strokeStyle=nt(l),u.lineWidth=Dn,u.stroke()};return t.$$set=u=>{"coords"in u&&n(1,a=u.coords),"opacity"in u&&n(2,l=u.opacity)},t.$$.update=()=>{t.$$.dirty&2&&([[i,s],[o,r]]=a)},[c,a,l]}class Bi extends W{constructor(e){super(),Y(this,e,zi,Fi,j,{coords:1,opacity:2})}}function Ue(t,e,n){const i=t.slice();return i[2]=e[n],i[4]=n,i}function Ye(t,e,n){const i=t.slice();return i[5]=e[n],i}function We(t){let e,n;return e=new Bi({props:{coords:[t[1].nodes.getCoords(t[5][0]),t[1].nodes.getCoords(t[5][1])],opacity:Math.pow(Tn,-t[4])}}),{c(){z(e.$$.fragment)},m(i,s){P(e,i,s),n=!0},p(i,s){const o={};s&3&&(o.coords=[i[1].nodes.getCoords(i[5][0]),i[1].nodes.getCoords(i[5][1])]),e.$set(o)},i(i){n||(w(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){F(e,i)}}}function Xe(t){let e,n,i=X(t[2]),s=[];for(let r=0;r<i.length;r+=1)s[r]=We(Ye(t,i,r));const o=r=>L(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=se()},m(r,a){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(r,a);M(r,e,a),n=!0},p(r,a){if(a&3){i=X(r[2]);let l;for(l=0;l<i.length;l+=1){const c=Ye(r,i,l);s[l]?(s[l].p(c,a),w(s[l],1)):(s[l]=We(c),s[l].c(),w(s[l],1),s[l].m(e.parentNode,e))}for(H(),l=i.length;l<s.length;l+=1)o(l);K()}},i(r){if(!n){for(let a=0;a<i.length;a+=1)w(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)L(s[a]);n=!1},d(r){r&&T(e),V(s,r)}}}function ji(t){let e,n,i=X(t[0]),s=[];for(let r=0;r<i.length;r+=1)s[r]=Xe(Ue(t,i,r));const o=r=>L(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=se()},m(r,a){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(r,a);M(r,e,a),n=!0},p(r,[a]){if(a&3){i=X(r[0]);let l;for(l=0;l<i.length;l+=1){const c=Ue(r,i,l);s[l]?(s[l].p(c,a),w(s[l],1)):(s[l]=Xe(c),s[l].c(),w(s[l],1),s[l].m(e.parentNode,e))}for(H(),l=i.length;l<s.length;l+=1)o(l);K()}},i(r){if(!n){for(let a=0;a<i.length;a+=1)w(s[a]);n=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)L(s[a]);n=!1},d(r){r&&T(e),V(s,r)}}}function Ui(t,e,n){let{stepsToRender:i}=e,{memory:s}=e;return t.$$set=o=>{"stepsToRender"in o&&n(0,i=o.stepsToRender),"memory"in o&&n(1,s=o.memory)},[i,s]}class Yi extends W{constructor(e){super(),Y(this,e,Ui,ji,j,{stepsToRender:0,memory:1})}}class Wi{constructor(){A(this,"steps",[]);A(this,"nSteps",0);A(this,"nodes",new at);A(this,"maxLeng",0)}addRandomNodes(e=1){for(let n=0;n<e;n++)this.nodes.add(Math.random(),Math.random())}adjustNumberOfNodes(e){if(this.nodes.count()<e)this.addRandomNodes(e-this.nodes.count());else if(this.nodes.count()>e){let n=[...this.nodes.all()].slice(e);for(let i of n)this.nodes.delete(i)}}runAlgos(e){this.steps=[],this.maxLeng=0;let n=0,i=new ct(this.nodes);for(let s of e){let o=[];const r=()=>{let a=i.totalLength();this.maxLeng=Math.max(a,this.maxLeng);let l=new ut(i.edges);o.push({edges:l,len:a,index:n}),n++,this.nSteps=n};s==e[0]&&r();for(let a of si(i,s))r();if(s==e[e.length-1])for(let a=0;a<it;a++)r();o.length==0&&r(),this.steps.push(o)}}}class Xi{constructor(e,n,i,s){this.name=e,this.priority=n,this.complete=i,this.isUnique=s}}class Hi{constructor(){A(this,"queue",[])}add(e,n,i,s=!0){const o=new Xi(e,i,n,s);o.isUnique&&this.queue.map(r=>r.name).includes(o.name)||(this.queue.push(o),this.doAll())}doNext(){if(this.queue.length==0)return;const e=this.queue.map(o=>o.priority),n=Math.max(...e),i=e.indexOf(n),s=this.queue[i];this.queue.splice(i,1),s.complete()}doAll(){for(;this.queue.length>0;)this.doNext()}}class Ki{constructor(e,n){A(this,"moveListenerFunction");this.actions=e,this.memory=n}handleMousedown(e,n,i){const s=e.target.getBoundingClientRect(),o=(e.clientX-s.left)/n,r=(e.clientY-s.top)/i;let a=this.memory.nodes.findNearNode([o,r],Re/Math.max(n,i));a===void 0&&(this.actions.addNode(o,r),a=this.memory.nodes.findNearNode([o,r],Re/Math.max(n,i))),this.startToDragNode(a,n,i)}startToDragNode(e,n,i){this.moveListenerFunction!==void 0&&this.stopToDragNode(),this.moveListenerFunction=s=>{const o=s.target.getBoundingClientRect(),r=(s.clientX-o.left)/n,a=(s.clientY-o.top)/i;this.actions.moveNode(e,[r,a])},window.addEventListener("mousemove",this.moveListenerFunction)}stopToDragNode(){this.moveListenerFunction!==void 0&&window.removeEventListener("mousemove",this.moveListenerFunction)}handleMouseup(){this.stopToDragNode()}handleMouseLeave(){this.stopToDragNode()}}function He(t){let e;return{c(){e=E("span"),e.textContent=`Watch various algorithms solve the traveling salesman problem. A\r
            salesman traveling from city to city wants to minimize the total\r
            distance traveled before returning to his starting point. Scroll on\r
            the bar in the right to see the steps the algorithm took. Select\r
            different algorithms to see how they compare. Click on the canvas to\r
            add cities. Drag cities to move them.`,y(e,"class","hover-text svelte-gdn3ad"),C(e,"color",re)},m(n,i){M(n,e,i)},d(n){n&&T(e)}}}function Gi(t){let e,n,i,s,o,r,a,l,c=t[0]&&He();return{c(){e=E("div"),n=E("div"),i=E("div"),s=U(),o=E("button"),o.textContent="info",r=U(),c&&c.c(),y(i,"id","placeholder"),y(i,"class","svelte-gdn3ad"),y(o,"class","square-button svelte-gdn3ad"),C(o,"background-color",he),C(o,"color",re),y(n,"id","info-button"),y(n,"class","svelte-gdn3ad"),y(e,"id","container"),y(e,"class","svelte-gdn3ad")},m(u,f){M(u,e,f),N(e,n),N(n,i),N(n,s),N(n,o),N(e,r),c&&c.m(e,null),a||(l=[m(e,"mouseover",t[1]),m(e,"mouseout",t[2])],a=!0)},p(u,[f]){u[0]?c||(c=He(),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i:q,o:q,d(u){u&&T(e),c&&c.d(),a=!1,J(l)}}}function Ji(t,e,n){let i=!1;return[i,()=>n(0,i=!0),()=>n(0,i=!1)]}class Qi extends W{constructor(e){super(),Y(this,e,Ji,Gi,j,{})}}function Ke(t){let e,n,i,s;return e=new Pi({props:{memory:t[2]}}),i=new Yi({props:{memory:t[2],stepsToRender:t[6]}}),{c(){z(e.$$.fragment),n=U(),z(i.$$.fragment)},m(o,r){P(e,o,r),M(o,n,r),P(i,o,r),s=!0},p(o,r){const a={};r&4&&(a.memory=o[2]),e.$set(a);const l={};r&4&&(l.memory=o[2]),r&64&&(l.stepsToRender=o[6]),i.$set(l)},i(o){s||(w(e.$$.fragment,o),w(i.$$.fragment,o),s=!0)},o(o){L(e.$$.fragment,o),L(i.$$.fragment,o),s=!1},d(o){o&&T(n),F(e,o),F(i,o)}}}function Zi(t){let e=t[5],n,i,s=Ke(t);return{c(){s.c(),n=se()},m(o,r){s.m(o,r),M(o,n,r),i=!0},p(o,r){r&32&&j(e,e=o[5])?(H(),L(s,1,1,q),K(),s=Ke(o),s.c(),w(s,1),s.m(n.parentNode,n)):s.p(o,r)},i(o){i||(w(s),i=!0)},o(o){L(s),i=!1},d(o){o&&T(n),s.d(o)}}}function Vi(t){let e,n,i,s,o,r,a,l,c,u,f,h,g,k;function R(_){t[9](_)}function S(_){t[10](_)}let v={$$slots:{default:[Zi]},$$scope:{ctx:t}};return t[0]!==void 0&&(v.width=t[0]),t[1]!==void 0&&(v.height=t[1]),i=new Ci({props:v}),G.push(()=>Ae(i,"width",R)),G.push(()=>Ae(i,"height",S)),c=new hi({props:{memory:t[2],actions:t[7],selectedAlgos:t[3],renderedStep:t[4]}}),f=new Qi({}),{c(){e=E("div"),n=E("div"),z(i.$$.fragment),a=U(),l=E("div"),z(c.$$.fragment),u=U(),z(f.$$.fragment),y(n,"id","canvas"),y(n,"class","svelte-17jin7h"),ce(()=>t[11].call(n)),y(l,"id","input"),y(e,"id","app"),y(e,"class","svelte-17jin7h")},m(_,O){M(_,e,O),N(e,n),P(i,n,null),r=bn(n,t[11].bind(n)),N(e,a),N(e,l),P(c,l,null),N(e,u),P(f,e,null),h=!0,g||(k=[m(n,"mousedown",t[12]),m(n,"mouseup",t[13]),m(n,"mouseleave",t[14])],g=!0)},p(_,[O]){const p={};O&131172&&(p.$$scope={dirty:O,ctx:_}),!s&&O&1&&(s=!0,p.width=_[0],ke(()=>s=!1)),!o&&O&2&&(o=!0,p.height=_[1],ke(()=>o=!1)),i.$set(p);const I={};O&4&&(I.memory=_[2]),O&8&&(I.selectedAlgos=_[3]),O&16&&(I.renderedStep=_[4]),c.$set(I)},i(_){h||(w(i.$$.fragment,_),w(c.$$.fragment,_),w(f.$$.fragment,_),h=!0)},o(_){L(i.$$.fragment,_),L(c.$$.fragment,_),L(f.$$.fragment,_),h=!1},d(_){_&&T(e),F(i),r(),F(c),F(f),g=!1,J(k)}}}function xi(t,e,n){let i,s,o=new Wi;const r=new ci;let a=.999,l=0,c=0,u,f=new Hi;const h={render(){const p=()=>{n(5,c+=1)};f.add("render",p,0)},addNode(p,I){const Q=()=>{o.nodes.count()>=st||(o.nodes.add(p,I),this.runAlgos(),this.updateRenderedStep())};f.add("add node",Q,2,!1)},adjustNumberOfNodes(p){const I=()=>{o.adjustNumberOfNodes(p),this.runAlgos(),this.updateRenderedStep()};f.add("adjust number of nodes",I,2.1,!1)},runAlgos(){const p=()=>{o.runAlgos(r.all()),this.renderSidebar(),this.updateStepsToRender()};f.add("run algorithms",p,1)},updateStepsToRender(){const p=()=>{n(6,u=o.steps.flat().slice(Math.max(l-it,0),l+1).reverse().map(I=>[...I.edges.all()])),this.updateRenderedStep(),this.render()};f.add("update the steps which are rendered",p,.5)},renderSidebar(){const p=()=>{n(2,o)};f.add("render sidebar",p,0)},changeInitAlgo(p){const I=()=>{n(3,r.initAlgo=p,r),this.runAlgos()};f.add("change init algo",I,2.2,!1)},changeOptimAlgo(p,I){const Q=()=>{n(3,r.optimAlgoStack[I]=p,r),this.runAlgos()};f.add("change optim algo",Q,2.2,!1)},addOptimAlgo(){const p=()=>{r.optimAlgoStack.push(de[0]),this.runAlgos(),this.renderSidebar(),this.updateRenderedStep()};f.add("add optim algo",p,2.3,!1)},removeOptimAlgo(){const p=()=>{r.optimAlgoStack.pop(),this.runAlgos(),this.renderSidebar(),this.updateRenderedStep()};f.add("remove optim algo",p,2.3,!1)},setVirtualScroll(p){const I=()=>{a=p,this.updateRenderedStep()};f.add("set virtual scroll",I,.6)},updateRenderedStep(){const p=()=>{const I=l;n(4,l=Math.floor(o.nSteps*a)),I!==l&&(this.renderSidebar(),this.updateStepsToRender())};f.add("set rendered step",p,.6)},moveNode(p,I){const Q=()=>{o.nodes.setCoords(p,I),this.runAlgos(),this.updateRenderedStep()};f.add("move node",Q,2.4,!1)}};h.adjustNumberOfNodes(30),l=o.nSteps-1,h.updateStepsToRender(),h.renderSidebar();const g=new Ki(h,o);function k(p){i=p,n(0,i)}function R(p){s=p,n(1,s)}function S(){s=this.clientHeight,i=this.clientWidth,n(1,s),n(0,i)}return[i,s,o,r,l,c,u,h,g,k,R,S,p=>g.handleMousedown(p,i,s),()=>{g.handleMouseup()},()=>g.handleMouseLeave()]}class $i extends W{constructor(e){super(),Y(this,e,xi,Vi,j,{})}}new $i({target:document.body});
